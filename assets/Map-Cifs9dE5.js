const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/maplibre-gl-BMvMIhUs.js","assets/index-DDJhKwF3.js","assets/index-7QoCVl0i.css"])))=>i.map(i=>d[i]);
import{r as a,m as se,j as m,a as ie,c as ae,b as O,u as ce,d as le,e as ue,f as ee,_ as de,g as N,h as fe,B as te,i as me,M as he}from"./index-DDJhKwF3.js";import{T as ge,D as pe,a as ve,b as ye,c as _e,d as be,e as xe,F as Se}from"./Footer-DtHQAfUg.js";import{u as Ee,L as Ce,a as we,p as W}from"./location-HQfLfVzS.js";import{A as Me,a as Te,b as Re,c as Le,I as ke}from"./accordion-CEXzGF5n.js";const ne=a.forwardRef((e,t)=>{const o=Ee(),n=se(o==null?void 0:o.getInputProps(),e);return m.jsx(ie.input,{...n,ref:t})});ne.displayName="FieldInput";var je=le("toast").parts("group","root","title","description","actionTrigger","closeTrigger");je.build();var Pe=(e,t)=>({...t,...ae(e)});function Ae(e){const t=Pe(e,{placement:"bottom",overlap:!1,max:24,gap:16,offsets:"1rem",hotkey:["altKey","KeyT"],removeDelay:200,pauseOnPageIdle:!0});let o=[],n=[],r=new Set;const s=d=>(o.push(d),()=>{const f=o.indexOf(d);o.splice(f,1)}),i=d=>(o.forEach(f=>f(d)),d),l=d=>{n.length>=t.max||(i(d),n.unshift(d))},c=d=>{const f=d.id??`toast:${ce()}`,R=n.find(S=>S.id===f);return r.has(f)&&r.delete(f),R?n=n.map(S=>S.id===f?i({...S,...d,id:f}):S):l({id:f,duration:t.duration,removeDelay:t.removeDelay,type:"info",...d,stacked:!t.overlap,gap:t.gap}),f},u=d=>(r.add(d),d?(o.forEach(f=>f({id:d,dismiss:!0})),n=n.filter(f=>f.id!==d)):(n.forEach(f=>{o.forEach(R=>R({id:f.id,dismiss:!0}))}),n=[]),d);return{attrs:t,subscribe:s,create:c,update:(d,f)=>c({id:d,...f}),remove:u,dismiss:d=>{d!=null?n=n.map(f=>f.id===d?i({...f,message:"DISMISS"}):f):n=n.map(f=>i({...f,message:"DISMISS"}))},error:d=>c({...d,type:"error"}),success:d=>c({...d,type:"success"}),info:d=>c({...d,type:"info"}),warning:d=>c({...d,type:"warning"}),loading:d=>c({...d,type:"loading"}),getVisibleToasts:()=>n.filter(d=>!r.has(d.id)),getCount:()=>n.length,promise:(d,f,R={})=>{if(!f)return;let S;f.loading!==void 0&&(S=c({...R,...f.loading,promise:d,type:"loading"}));let F=S!==void 0,z;const re=O(d).then(async C=>{if(z=["resolve",C],ze(C)&&!C.ok){F=!1;const L=O(f.error,`HTTP Error! status: ${C.status}`);c({...R,...L,id:S,type:"error"})}else if(f.success!==void 0){F=!1;const L=O(f.success,C);c({...R,...L,id:S,type:"success"})}}).catch(async C=>{if(z=["reject",C],f.error!==void 0){F=!1;const L=O(f.error,C);c({...R,...L,id:S,type:"error"})}}).finally(()=>{var C;F&&(u(S),S=void 0),(C=f.finally)==null||C.call(f)});return{id:S,unwrap:()=>new Promise((C,L)=>re.then(()=>z[0]==="reject"?L(z[1]):C(z[1])).catch(L))}},pause:d=>{d!=null?n=n.map(f=>f.id===d?i({...f,message:"PAUSE"}):f):n=n.map(f=>i({...f,message:"PAUSE"}))},resume:d=>{d!=null?n=n.map(f=>f.id===d?i({...f,message:"RESUME"}):f):n=n.map(f=>i({...f,message:"RESUME"}))},isVisible:d=>!r.has(d)&&!!n.find(f=>f.id===d),isDismissed:d=>r.has(d),expand:()=>{n=n.map(d=>i({...d,stacked:!0}))},collapse:()=>{n=n.map(d=>i({...d,stacked:!1}))}}}var ze=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number";const De=e=>Ae(e),{withContext:Ie}=ue({key:"input"}),Fe=Ie(ne),Oe=De({placement:"bottom-end",pauseOnPageIdle:!0}),Ne=a.createContext(null);function Ue(e,t){const o=Array.isArray(e)?e[0]:e?e.x:0,n=Array.isArray(e)?e[1]:e?e.y:0,r=Array.isArray(t)?t[0]:t?t.x:0,s=Array.isArray(t)?t[1]:t?t.y:0;return o===r&&n===s}function T(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!T(e[o],t[o]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const o=Object.keys(e),n=Object.keys(t);if(o.length!==n.length)return!1;for(const r of o)if(!t.hasOwnProperty(r)||!T(e[r],t[r]))return!1;return!0}return!1}function Be(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function H(e,t){if(!e.getProjection)return;const o=e.getProjection(),n=t.getProjection();T(o,n)||t.setProjection(o)}function Z(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function $(e,t){const o=t.viewState||t;let n=!1;if("zoom"in o){const r=e.zoom;e.zoom=o.zoom,n=n||r!==e.zoom}if("bearing"in o){const r=e.bearing;e.bearing=o.bearing,n=n||r!==e.bearing}if("pitch"in o){const r=e.pitch;e.pitch=o.pitch,n=n||r!==e.pitch}if(o.padding&&!e.isPaddingEqual(o.padding)&&(n=!0,e.padding=o.padding),"longitude"in o&&"latitude"in o){const r=e.center;e.center=new r.constructor(o.longitude,o.latitude),n=n||r!==e.center}return n}const Ve=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function q(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const n of e.layers)t[n.id]=n;const o=e.layers.map(n=>{let r=null;"interactive"in n&&(r=Object.assign({},n),delete r.interactive);const s=t[n.ref];if(s){r=r||Object.assign({},n),delete r.ref;for(const i of Ve)i in s&&(r[i]=s[i])}return r||n});return{...e,layers:o}}var K={};const G={version:8,sources:{},layers:[]},Q={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},V={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},J={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},We=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],He=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class j{constructor(t,o,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=r=>{const s=this.props[J[r.type]];s?s(r):r.type==="error"&&console.error(r.error)},this._onPointerEvent=r=>{(r.type==="mousemove"||r.type==="mouseout")&&this._updateHover(r);const s=this.props[Q[r.type]];s&&(this.props.interactiveLayerIds&&r.type!=="mouseover"&&r.type!=="mouseout"&&(r.features=this._hoveredFeatures||this._queryRenderedFeatures(r.point)),s(r),delete r.features)},this._onCameraEvent=r=>{if(!this._internalUpdate){const s=this.props[V[r.type]];s&&s(r)}r.type in this._deferredEvents&&(this._deferredEvents[r.type]=!1)},this._MapClass=t,this.props=o,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const o=this.props;this.props=t;const n=this._updateSettings(t,o);n&&this._createShadowTransform(this._map);const r=this._updateSize(t),s=this._updateViewState(t,!0);this._updateStyle(t,o),this._updateStyleComponents(t,o),this._updateHandlers(t,o),(n||r||s&&!this._map.isMoving())&&this.redraw()}static reuse(t,o){const n=j.savedMaps.pop();if(!n)return null;const r=n.map,s=r.getContainer();for(o.className=s.className;s.childNodes.length>0;)o.appendChild(s.childNodes[0]);r._container=o;const i=r._resizeObserver;i&&(i.disconnect(),i.observe(o)),n.setProps({...t,styleDiffing:!1}),r.resize();const{initialViewState:l}=t;return l&&(l.bounds?r.fitBounds(l.bounds,{...l.fitBoundsOptions,duration:0}):n._updateViewState(l,!1)),r.isStyleLoaded()?r.fire("load"):r.once("styledata",()=>r.fire("load")),r._update(),n}_initialize(t){const{props:o}=this,{mapStyle:n=G}=o,r={...o,...o.initialViewState,accessToken:o.mapboxAccessToken||Ze()||null,container:t,style:q(n)},s=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[s.longitude||0,s.latitude||0],zoom:s.zoom||0,pitch:s.pitch||0,bearing:s.bearing||0}),o.gl){const h=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=h,o.gl)}const i=new this._MapClass(r);s.padding&&i.setPadding(s.padding),o.cursor&&(i.getCanvas().style.cursor=o.cursor),this._createShadowTransform(i);const l=i._render;i._render=h=>{this._inRender=!0,l.call(i,h),this._inRender=!1};const c=i._renderTaskQueue.run;i._renderTaskQueue.run=h=>{c.call(i._renderTaskQueue,h),this._onBeforeRepaint()},i.on("render",()=>this._onAfterRepaint());const u=i.fire;i.fire=this._fireEvent.bind(this,u),i.on("resize",()=>{this._renderTransform.resize(i.transform.width,i.transform.height)}),i.on("styledata",()=>{this._updateStyleComponents(this.props,{}),H(i.transform,this._renderTransform)}),i.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const h in Q)i.on(h,this._onPointerEvent);for(const h in V)i.on(h,this._onCameraEvent);for(const h in J)i.on(h,this._onEvent);this._map=i}recycle(){const o=this.map.getContainer().querySelector("[mapboxgl-children]");o==null||o.remove(),j.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const o=Be(t.transform);t.painter.transform=o,this._renderTransform=o}_updateSize(t){const{viewState:o}=t;if(o){const n=this._map;if(o.width!==n.transform.width||o.height!==n.transform.height)return n.resize(),!0}return!1}_updateViewState(t,o){if(this._internalUpdate)return!1;const n=this._map,r=this._renderTransform,{zoom:s,pitch:i,bearing:l}=r,c=n.isMoving();c&&(r.cameraElevationReference="sea");const u=$(r,{...Z(n.transform),...t});if(c&&(r.cameraElevationReference="ground"),u&&o){const h=this._deferredEvents;h.move=!0,h.zoom||(h.zoom=s!==r.zoom),h.rotate||(h.rotate=l!==r.bearing),h.pitch||(h.pitch=i!==r.pitch)}return c||$(n.transform,t),u}_updateSettings(t,o){const n=this._map;let r=!1;for(const s of We)if(s in t&&!T(t[s],o[s])){r=!0;const i=n[`set${s[0].toUpperCase()}${s.slice(1)}`];i==null||i.call(n,t[s])}return r}_updateStyle(t,o){if(t.cursor!==o.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==o.mapStyle){const{mapStyle:n=G,styleDiffing:r=!0}=t,s={diff:r};return"localIdeographFontFamily"in t&&(s.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(q(n),s),!0}return!1}_updateStyleComponents(t,o){const n=this._map;let r=!1;return n.isStyleLoaded()&&("light"in t&&n.setLight&&!T(t.light,o.light)&&(r=!0,n.setLight(t.light)),"fog"in t&&n.setFog&&!T(t.fog,o.fog)&&(r=!0,n.setFog(t.fog)),"terrain"in t&&n.setTerrain&&!T(t.terrain,o.terrain)&&(!t.terrain||n.getSource(t.terrain.source))&&(r=!0,n.setTerrain(t.terrain))),r}_updateHandlers(t,o){var n,r;const s=this._map;let i=!1;for(const l of He){const c=(n=t[l])!==null&&n!==void 0?n:!0,u=(r=o[l])!==null&&r!==void 0?r:!0;T(c,u)||(i=!0,c?s[l].enable(c):s[l].disable())}return i}_queryRenderedFeatures(t){const o=this._map,n=o.transform,{interactiveLayerIds:r=[]}=this.props;try{return o.transform=this._renderTransform,o.queryRenderedFeatures(t,{layers:r.filter(o.getLayer.bind(o))})}catch{return[]}finally{o.transform=n}}_updateHover(t){var o;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const s=t.type,i=((o=this._hoveredFeatures)===null||o===void 0?void 0:o.length)>0,l=this._queryRenderedFeatures(t.point),c=l.length>0;!c&&i&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,c&&!i&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=s}else this._hoveredFeatures=null}_fireEvent(t,o,n){const r=this._map,s=r.transform,i=typeof o=="string"?o:o.type;return i==="move"&&this._updateViewState(this.props,!1),i in V&&(typeof o=="object"&&(o.viewState=Z(s)),this._map.isMoving())?(r.transform=this._renderTransform,t.call(r,o,n),r.transform=s,r):(t.call(r,o,n),r)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&t.fire(n);this._internalUpdate=!1;const o=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{H(this._renderTransform,o),t.transform=o}}}j.savedMaps=[];function Ze(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||K.MapboxAccessToken}catch{}try{e=e||K.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const $e=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function qe(e){if(!e)return null;const t=e.map,o={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:n=>{const r=t.transform;t.transform=e.transform;const s=t.project(n);return t.transform=r,s},unproject:n=>{const r=t.transform;t.transform=e.transform;const s=t.unproject(n);return t.transform=r,s},queryTerrainElevation:(n,r)=>{const s=t.transform;t.transform=e.transform;const i=t.queryTerrainElevation(n,r);return t.transform=s,i},queryRenderedFeatures:(n,r)=>{const s=t.transform;t.transform=e.transform;const i=t.queryRenderedFeatures(n,r);return t.transform=s,i}};for(const n of Ke(t))!(n in o)&&!$e.includes(n)&&(o[n]=t[n].bind(t));return o}function Ke(e){const t=new Set;let o=e;for(;o;){for(const n of Object.getOwnPropertyNames(o))n[0]!=="_"&&typeof e[n]=="function"&&n!=="fire"&&n!=="setEventedParent"&&t.add(n);o=Object.getPrototypeOf(o)}return Array.from(t)}const Ge=typeof document<"u"?a.useLayoutEffect:a.useEffect,Qe=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Je(e,t){for(const n of Qe)n in t&&(e[n]=t[n]);const{RTLTextPlugin:o="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;o&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(o,n=>{n&&console.error(n)},!0)}const U=a.createContext(null);function Ye(e,t,o){const n=a.useContext(Ne),[r,s]=a.useState(null),i=a.useRef(),{current:l}=a.useRef({mapLib:null,map:null});a.useEffect(()=>{const h=e.mapLib;let x=!0,g;return Promise.resolve(h||o).then(y=>{if(!x)return;if(!y)throw new Error("Invalid mapLib");const b="Map"in y?y:y.default;if(!b.Map)throw new Error("Invalid mapLib");if(Je(b,e),!b.supported||b.supported(e))e.reuseMaps&&(g=j.reuse(e,i.current)),g||(g=new j(b.Map,e,i.current)),l.map=qe(g),l.mapLib=b,s(g),n==null||n.onMapMount(l.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(y=>{const{onError:b}=e;b?b({type:"error",target:null,originalEvent:null,error:y}):console.error(y)}),()=>{x=!1,g&&(n==null||n.onMapUnmount(e.id),e.reuseMaps?g.recycle():g.destroy())}},[]),Ge(()=>{r&&r.setProps(e)}),a.useImperativeHandle(t,()=>l.map,[r]);const c=a.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),u={height:"100%"};return a.createElement("div",{id:e.id,ref:i,style:c},r&&a.createElement(U.Provider,{value:l},a.createElement("div",{"mapboxgl-children":"",style:u},e.children)))}const Xe=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function k(e,t){if(!e||!t)return;const o=e.style;for(const n in t){const r=t[n];Number.isFinite(r)&&!Xe.test(n)?o[n]=`${r}px`:o[n]=r}}function et(e,t){const{map:o,mapLib:n}=a.useContext(U),r=a.useRef({props:e});r.current.props=e;const s=a.useMemo(()=>{let P=!1;a.Children.forEach(e.children,p=>{p&&(P=!0)});const A={...e,element:P?document.createElement("div"):null},M=new n.Marker(A);return M.setLngLat([e.longitude,e.latitude]),M.getElement().addEventListener("click",p=>{var v,_;(_=(v=r.current.props).onClick)===null||_===void 0||_.call(v,{type:"click",target:M,originalEvent:p})}),M.on("dragstart",p=>{var v,_;const E=p;E.lngLat=s.getLngLat(),(_=(v=r.current.props).onDragStart)===null||_===void 0||_.call(v,E)}),M.on("drag",p=>{var v,_;const E=p;E.lngLat=s.getLngLat(),(_=(v=r.current.props).onDrag)===null||_===void 0||_.call(v,E)}),M.on("dragend",p=>{var v,_;const E=p;E.lngLat=s.getLngLat(),(_=(v=r.current.props).onDragEnd)===null||_===void 0||_.call(v,E)}),M},[]);a.useEffect(()=>(s.addTo(o.getMap()),()=>{s.remove()}),[]);const{longitude:i,latitude:l,offset:c,style:u,draggable:h=!1,popup:x=null,rotation:g=0,rotationAlignment:y="auto",pitchAlignment:b="auto"}=e;return a.useEffect(()=>{k(s.getElement(),u)},[u]),a.useImperativeHandle(t,()=>s,[]),(s.getLngLat().lng!==i||s.getLngLat().lat!==l)&&s.setLngLat([i,l]),c&&!Ue(s.getOffset(),c)&&s.setOffset(c),s.isDraggable()!==h&&s.setDraggable(h),s.getRotation()!==g&&s.setRotation(g),s.getRotationAlignment()!==y&&s.setRotationAlignment(y),s.getPitchAlignment()!==b&&s.setPitchAlignment(b),s.getPopup()!==x&&s.setPopup(x),ee.createPortal(e.children,s.getElement())}a.memo(a.forwardRef(et));function Y(e){return new Set(e?e.trim().split(/\s+/):[])}function tt(e,t){const{map:o,mapLib:n}=a.useContext(U),r=a.useMemo(()=>document.createElement("div"),[]),s=a.useRef({props:e});s.current.props=e;const i=a.useMemo(()=>{const l={...e},c=new n.Popup(l);return c.setLngLat([e.longitude,e.latitude]),c.once("open",u=>{var h,x;(x=(h=s.current.props).onOpen)===null||x===void 0||x.call(h,u)}),c},[]);if(a.useEffect(()=>{const l=c=>{var u,h;(h=(u=s.current.props).onClose)===null||h===void 0||h.call(u,c)};return i.on("close",l),i.setDOMContent(r).addTo(o.getMap()),()=>{i.off("close",l),i.isOpen()&&i.remove()}},[]),a.useEffect(()=>{k(i.getElement(),e.style)},[e.style]),a.useImperativeHandle(t,()=>i,[]),i.isOpen()&&((i.getLngLat().lng!==e.longitude||i.getLngLat().lat!==e.latitude)&&i.setLngLat([e.longitude,e.latitude]),e.offset&&!T(i.options.offset,e.offset)&&i.setOffset(e.offset),(i.options.anchor!==e.anchor||i.options.maxWidth!==e.maxWidth)&&(i.options.anchor=e.anchor,i.setMaxWidth(e.maxWidth)),i.options.className!==e.className)){const l=Y(i.options.className),c=Y(e.className);for(const u of l)c.has(u)||i.removeClassName(u);for(const u of c)l.has(u)||i.addClassName(u);i.options.className=e.className}return ee.createPortal(e.children,r)}const nt=a.memo(a.forwardRef(tt));function D(e,t,o,n){const r=a.useContext(U),s=a.useMemo(()=>e(r),[]);return a.useEffect(()=>{const i=t,l=null,c=typeof t=="function"?t:null,{map:u}=r;return u.hasControl(s)||(u.addControl(s,i==null?void 0:i.position),l&&l(r)),()=>{c&&c(r),u.hasControl(s)&&u.removeControl(s)}},[]),s}function ot(e){const t=D(({mapLib:o})=>new o.AttributionControl(e),{position:e.position});return a.useEffect(()=>{k(t._container,e.style)},[e.style]),null}a.memo(ot);function rt(e){const t=D(({mapLib:o})=>new o.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return a.useEffect(()=>{k(t._controlContainer,e.style)},[e.style]),null}a.memo(rt);function st(e,t){const o=a.useRef({props:e}),n=D(({mapLib:r})=>{const s=new r.GeolocateControl(e),i=s._setupUI;return s._setupUI=l=>{s._container.hasChildNodes()||i(l)},s.on("geolocate",l=>{var c,u;(u=(c=o.current.props).onGeolocate)===null||u===void 0||u.call(c,l)}),s.on("error",l=>{var c,u;(u=(c=o.current.props).onError)===null||u===void 0||u.call(c,l)}),s.on("outofmaxbounds",l=>{var c,u;(u=(c=o.current.props).onOutOfMaxBounds)===null||u===void 0||u.call(c,l)}),s.on("trackuserlocationstart",l=>{var c,u;(u=(c=o.current.props).onTrackUserLocationStart)===null||u===void 0||u.call(c,l)}),s.on("trackuserlocationend",l=>{var c,u;(u=(c=o.current.props).onTrackUserLocationEnd)===null||u===void 0||u.call(c,l)}),s},{position:e.position});return o.current.props=e,a.useImperativeHandle(t,()=>n,[]),a.useEffect(()=>{k(n._container,e.style)},[e.style]),null}a.memo(a.forwardRef(st));function it(e){const t=D(({mapLib:o})=>new o.NavigationControl(e),{position:e.position});return a.useEffect(()=>{k(t._container,e.style)},[e.style]),null}const at=a.memo(it);function ct(e){const t=D(({mapLib:s})=>new s.ScaleControl(e),{position:e.position}),o=a.useRef(e),n=o.current;o.current=e;const{style:r}=e;return e.maxWidth!==void 0&&e.maxWidth!==n.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==n.unit&&t.setUnit(e.unit),a.useEffect(()=>{k(t._container,r)},[r]),null}a.memo(ct);const lt=de(()=>import("./maplibre-gl-BMvMIhUs.js").then(e=>e.m),__vite__mapDeps([0,1,2])),ut=a.forwardRef(function(t,o){return Ye(t,o,lt)}),dt=nt,ft=at;function X({lat:e,lon:t,display_name:o}){const{t:n}=N(),r=fe(),s=()=>{r(`/simulation/${t}/${e}`)},[i,l]=a.useState(!0);return a.useEffect(()=>{console.log("effect changed"),l(!0)},[e,t]),m.jsx(m.Fragment,{children:i&&m.jsxs(dt,{latitude:e,longitude:t,closeOnClick:!1,onClose:()=>l(!1),children:[m.jsx(ge,{color:"black",margin:"10px",children:o}),m.jsx(te,{margin:"10px",variant:"subtle",onClick:s,children:n("startSimulation")})]})})}function mt({callback:e}){const[t,o]=a.useState(""),[n,r]=a.useState([]),[s,i]=a.useState(!1),[l,c]=a.useState(!1),u=a.useRef([]),h=a.useRef(),x=a.useRef(),[g,y]=a.useState(-1);window.searchFieldInput=t;const{t:b}=N();a.useEffect(()=>{const p=v=>{x.current&&!x.current.contains(v.target)&&(i(!1),y(-1))};return document.addEventListener("mousedown",p),document.addEventListener("touchstart",p),()=>{document.removeEventListener("mousedown",p),document.removeEventListener("touchstart",p)}}),a.useEffect(()=>{const v=setTimeout(async()=>{if(t.length<3&&c(!1),!l){if(t.length>2)try{const _=t.split(" ");let E=null;for(let w of _)if(w[w.length-1]===","&&(w=w.slice(0,-1)),w.length!=5&&/^\d{1,3}[a-zA-Z]?$/.test(w)){E=w;break}const B=await(await fetch(`https://photon.komoot.io/api/?q=${encodeURIComponent(t)}&bbox=5.98865807458,47.3024876979,15.0169958839,54.983104153&limit=5&lang=de&layer=street`)).json();console.log("data",B),r(B.features.map(w=>{let I=w.properties.name;return E&&(I+=" "+E),I+=", "+w.properties.postcode+" "+w.properties.city,I}))}catch(_){console.error("Error fetching suggestions:",_)}else r([]);i(n.length>0)}},200);return()=>clearTimeout(v)},[t,l]);const P=async p=>{p.preventDefault();const v=await W(t);console.warn(v),e(v)},A=p=>{o(p),W(p).then(v=>{console.warn(v),e(v)}),r([]),c(!0)},M=p=>{p.key==="ArrowDown"?(p.preventDefault(),y(v=>v<n.length-1?v+1:v)):p.key==="ArrowUp"?(p.preventDefault(),y(v=>v>-1?v-1:-1)):p.key==="Enter"&&g>-1&&(p.preventDefault(),A(n[g]))};return a.useEffect(()=>{g>-1&&u.current[g]?u.current[g].focus():g===-1&&h.current.focus()},[g]),m.jsxs("form",{ref:x,onSubmit:P,style:{display:"flex",flexDirection:"column",alignItems:"stretch",padding:"5px",position:"relative"},children:[m.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[m.jsx(Fe,{ref:h,value:t,placeholder:b("searchField.placeholder"),onChange:p=>o(p.target.value),onKeyDown:M,margin:"5px",autoComplete:"street-address"}),m.jsx(te,{margin:"5px",minWidth:"150px",type:"submit",variant:"subtle",children:b("Search")})]}),s&&m.jsx(Ce,{as:"ul",style:{paddingLeft:"0",marginTop:"0"},variant:"plain",borderWidth:1,mt:2,position:"absolute",top:"100%",left:0,right:0,zIndex:1,boxShadow:"md",children:n.map((p,v)=>m.jsx(we,{ref:_=>u.current[v]=_,p:2,style:{paddingLeft:"1em"},cursor:"pointer",_hover:{backgroundColor:"gray.100"},backgroundColor:g===v?"gray.100":"white",onClick:()=>A(p),onKeyDown:M,color:"black",children:p},v))})]})}function ht({image:e,text:t}){return m.jsxs(me,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",children:[e&&m.jsx(ke,{src:e.src,alt:e.alt,style:{maxHeight:"200px",width:"auto",margin:"20px"}}),t]})}function gt(){const{t:e}=N(),[t,o]=a.useState(!0);return m.jsx(pe,{size:"xl",open:t,onOpenChange:n=>o(n.open),children:m.jsxs(ve,{children:[m.jsx(ye,{children:m.jsx(_e,{as:"h1",children:e("WelcomeMessage.title")})}),m.jsxs(be,{children:[m.jsx("p",{children:e("WelcomeMessage.introduction")}),m.jsx("br",{}),Array.from({length:5},(n,r)=>m.jsx(Me,{multiple:!0,children:m.jsxs(Te,{children:[m.jsx(Re,{children:e(`WelcomeMessage.${r}.title`)}),m.jsx(Le,{children:m.jsx(ht,{image:{src:`images/WelcomeMessage${r}.png`,alt:e(`WelcomeMessage.${r}.alt`)},text:e(`WelcomeMessage.${r}.text`)})})]},r)}))]}),m.jsx(xe,{})]})})}function xt(){const{t:e}=N(),t=[5.98,47.3,15.1,55],[o,n]=a.useState({bounds:t,zoom:6}),[r,s]=a.useState([]),i=g=>{if(g.length==0)console.error("No search results!"),Oe.create({title:e("noSearchResults.title"),description:e("noSearchResults.description"),status:"error",duration:4e3,isClosable:!0});else{const y=g[0];let b=y.boundingBox;y.addressType==="building"&&s([m.jsx(X,{...y},y.key)]),console.log("bounds"),console.log(b),l.current.fitBounds(b,{maxZoom:17,speed:2})}},l=a.useRef(),c=a.useCallback(g=>{l.current=g,g!==null&&(g.getMap().dragRotate.disable(),g.getMap().touchZoomRotate.disableRotation())},[]),[u,h]=a.useState(null),x=a.useCallback(g=>{console.log(g);const{lng:y,lat:b}=g.lngLat;h([b,y])});return m.jsxs(he,{description:e("mainDescription"),children:[m.jsx("header",{children:m.jsx("div",{className:"title",children:m.jsx(mt,{callback:i})})}),m.jsx(gt,{}),m.jsxs("div",{className:"content",children:[m.jsxs(ut,{ref:c,...o,maxZoom:19,style:{width:"100%",height:"100%"},mapStyle:"https://sgx.geodatenzentrum.de/gdz_basemapde_vektor/styles/bm_web_col.json",onMove:g=>n(g.viewState),onClick:x,attributionControl:!1,maxBounds:[-10,35,30,65],children:[m.jsx(m.Fragment,{children:r}),u&&m.jsx(X,{lat:u[0],lon:u[1],display_name:e("map.userSelection")},"userSelectiion"),m.jsx(ft,{position:"bottom-right",showCompass:!1})]}),m.jsx(Se,{federalState:"",frontendState:"Map"})]})]})}export{xt as default};
