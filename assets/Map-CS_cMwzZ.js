const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/maplibre-gl-DCDtuu7q.js","assets/index-uTz8eZU2.js","assets/index-BZpzF2_o.css"])))=>i.map(i=>d[i]);
import{u as $,a as G,r as i,c as K,f as Q,j as f,b as J,d as P,e as V,_ as Y,g as X,M as ee}from"./index-uTz8eZU2.js";import{I as te,B as j,r as ne,u as oe,M as re,a as se,b as ae,c as ie,d as le,e as ce,f as ue}from"./location-DgoOsDn0.js";import{T as de,C as fe,B as me,F as he}from"./Footer-5eSJq-1q.js";import{I as ge}from"./chunk-QINAG4RG-jqUXJtxn.js";function ye(e){const{theme:t}=$(),o=G();return i.useMemo(()=>K(t.direction,{...o,...e}),[e,t.direction,o])}var q=Q(function(t,o){const{direction:n,align:r,justify:s,wrap:a,basis:l,grow:u,shrink:c,...d}=t,m={display:"flex",flexDirection:n,alignItems:r,justifyContent:s,flexWrap:a,flexBasis:l,flexGrow:u,flexShrink:c};return f.jsx(J.div,{ref:o,__css:m,...d})});q.displayName="Flex";function pe({callback:e}){const[t,o]=i.useState("");window.searchFieldInput=t;const{t:n}=P(),r=async s=>{s.preventDefault();const a=await ne(t);console.warn(location),e(a)};return f.jsxs("form",{style:{display:"flex",alignItems:"center",padding:"5px"},onSubmit:r,children:[f.jsx(te,{type:"text",placeholder:n("searchField.placeholder"),value:t,onChange:s=>o(s.target.value),margin:"5px"}),f.jsx(j,{isLoading:!1,type:"submit",minWidth:"150px",margin:"5px",loadingText:"Loading",children:n("Search")})]})}const ve=i.createContext(null);function _e(e,t){const o=Array.isArray(e)?e[0]:e?e.x:0,n=Array.isArray(e)?e[1]:e?e.y:0,r=Array.isArray(t)?t[0]:t?t.x:0,s=Array.isArray(t)?t[1]:t?t.y:0;return o===r&&n===s}function v(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let o=0;o<e.length;o++)if(!v(e[o],t[o]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const o=Object.keys(e),n=Object.keys(t);if(o.length!==n.length)return!1;for(const r of o)if(!t.hasOwnProperty(r)||!v(e[r],t[r]))return!1;return!0}return!1}function xe(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function A(e,t){if(!e.getProjection)return;const o=e.getProjection(),n=t.getProjection();v(o,n)||t.setProjection(o)}function F(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function O(e,t){const o=t.viewState||t;let n=!1;if("longitude"in o&&"latitude"in o){const r=e.center;e.center=new r.constructor(o.longitude,o.latitude),n=n||r!==e.center}if("zoom"in o){const r=e.zoom;e.zoom=o.zoom,n=n||r!==e.zoom}if("bearing"in o){const r=e.bearing;e.bearing=o.bearing,n=n||r!==e.bearing}if("pitch"in o){const r=e.pitch;e.pitch=o.pitch,n=n||r!==e.pitch}return o.padding&&!e.isPaddingEqual(o.padding)&&(n=!0,e.padding=o.padding),n}const be=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function N(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const n of e.layers)t[n.id]=n;const o=e.layers.map(n=>{let r=null;"interactive"in n&&(r=Object.assign({},n),delete r.interactive);const s=t[n.ref];if(s){r=r||Object.assign({},n),delete r.ref;for(const a of be)a in s&&(r[a]=s[a])}return r||n});return{...e,layers:o}}var I={};const B={version:8,sources:{},layers:[]},D={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},z={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},W={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Ce=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Se=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class E{constructor(t,o,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=r=>{const s=this.props[W[r.type]];s?s(r):r.type==="error"&&console.error(r.error)},this._onPointerEvent=r=>{(r.type==="mousemove"||r.type==="mouseout")&&this._updateHover(r);const s=this.props[D[r.type]];s&&(this.props.interactiveLayerIds&&r.type!=="mouseover"&&r.type!=="mouseout"&&(r.features=this._hoveredFeatures||this._queryRenderedFeatures(r.point)),s(r),delete r.features)},this._onCameraEvent=r=>{if(!this._internalUpdate){const s=this.props[z[r.type]];s&&s(r)}r.type in this._deferredEvents&&(this._deferredEvents[r.type]=!1)},this._MapClass=t,this.props=o,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const o=this.props;this.props=t;const n=this._updateSettings(t,o);n&&this._createShadowTransform(this._map);const r=this._updateSize(t),s=this._updateViewState(t,!0);this._updateStyle(t,o),this._updateStyleComponents(t,o),this._updateHandlers(t,o),(n||r||s&&!this._map.isMoving())&&this.redraw()}static reuse(t,o){const n=E.savedMaps.pop();if(!n)return null;const r=n.map,s=r.getContainer();for(o.className=s.className;s.childNodes.length>0;)o.appendChild(s.childNodes[0]);r._container=o;const a=r._resizeObserver;a&&(a.disconnect(),a.observe(o)),n.setProps({...t,styleDiffing:!1}),r.resize();const{initialViewState:l}=t;return l&&(l.bounds?r.fitBounds(l.bounds,{...l.fitBoundsOptions,duration:0}):n._updateViewState(l,!1)),r.isStyleLoaded()?r.fire("load"):r.once("styledata",()=>r.fire("load")),r._update(),n}_initialize(t){const{props:o}=this,{mapStyle:n=B}=o,r={...o,...o.initialViewState,accessToken:o.mapboxAccessToken||Me()||null,container:t,style:N(n)},s=r.initialViewState||r.viewState||r;if(Object.assign(r,{center:[s.longitude||0,s.latitude||0],zoom:s.zoom||0,pitch:s.pitch||0,bearing:s.bearing||0}),o.gl){const d=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=d,o.gl)}const a=new this._MapClass(r);s.padding&&a.setPadding(s.padding),o.cursor&&(a.getCanvas().style.cursor=o.cursor),this._createShadowTransform(a);const l=a._render;a._render=d=>{this._inRender=!0,l.call(a,d),this._inRender=!1};const u=a._renderTaskQueue.run;a._renderTaskQueue.run=d=>{u.call(a._renderTaskQueue,d),this._onBeforeRepaint()},a.on("render",()=>this._onAfterRepaint());const c=a.fire;a.fire=this._fireEvent.bind(this,c),a.on("resize",()=>{this._renderTransform.resize(a.transform.width,a.transform.height)}),a.on("styledata",()=>{this._updateStyleComponents(this.props,{}),A(a.transform,this._renderTransform)}),a.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const d in D)a.on(d,this._onPointerEvent);for(const d in z)a.on(d,this._onCameraEvent);for(const d in W)a.on(d,this._onEvent);this._map=a}recycle(){const o=this.map.getContainer().querySelector("[mapboxgl-children]");o==null||o.remove(),E.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const o=xe(t.transform);t.painter.transform=o,this._renderTransform=o}_updateSize(t){const{viewState:o}=t;if(o){const n=this._map;if(o.width!==n.transform.width||o.height!==n.transform.height)return n.resize(),!0}return!1}_updateViewState(t,o){if(this._internalUpdate)return!1;const n=this._map,r=this._renderTransform,{zoom:s,pitch:a,bearing:l}=r,u=n.isMoving();u&&(r.cameraElevationReference="sea");const c=O(r,{...F(n.transform),...t});if(u&&(r.cameraElevationReference="ground"),c&&o){const d=this._deferredEvents;d.move=!0,d.zoom||(d.zoom=s!==r.zoom),d.rotate||(d.rotate=l!==r.bearing),d.pitch||(d.pitch=a!==r.pitch)}return u||O(n.transform,t),c}_updateSettings(t,o){const n=this._map;let r=!1;for(const s of Ce)if(s in t&&!v(t[s],o[s])){r=!0;const a=n[`set${s[0].toUpperCase()}${s.slice(1)}`];a==null||a.call(n,t[s])}return r}_updateStyle(t,o){if(t.cursor!==o.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==o.mapStyle){const{mapStyle:n=B,styleDiffing:r=!0}=t,s={diff:r};return"localIdeographFontFamily"in t&&(s.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(N(n),s),!0}return!1}_updateStyleComponents(t,o){const n=this._map;let r=!1;return n.isStyleLoaded()&&("light"in t&&n.setLight&&!v(t.light,o.light)&&(r=!0,n.setLight(t.light)),"fog"in t&&n.setFog&&!v(t.fog,o.fog)&&(r=!0,n.setFog(t.fog)),"terrain"in t&&n.setTerrain&&!v(t.terrain,o.terrain)&&(!t.terrain||n.getSource(t.terrain.source))&&(r=!0,n.setTerrain(t.terrain))),r}_updateHandlers(t,o){var n,r;const s=this._map;let a=!1;for(const l of Se){const u=(n=t[l])!==null&&n!==void 0?n:!0,c=(r=o[l])!==null&&r!==void 0?r:!0;v(u,c)||(a=!0,u?s[l].enable(u):s[l].disable())}return a}_queryRenderedFeatures(t){const o=this._map,n=o.transform,{interactiveLayerIds:r=[]}=this.props;try{return o.transform=this._renderTransform,o.queryRenderedFeatures(t,{layers:r.filter(o.getLayer.bind(o))})}catch{return[]}finally{o.transform=n}}_updateHover(t){var o;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const s=t.type,a=((o=this._hoveredFeatures)===null||o===void 0?void 0:o.length)>0,l=this._queryRenderedFeatures(t.point),u=l.length>0;!u&&a&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,u&&!a&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=s}else this._hoveredFeatures=null}_fireEvent(t,o,n){const r=this._map,s=r.transform,a=typeof o=="string"?o:o.type;return a==="move"&&this._updateViewState(this.props,!1),a in z&&(typeof o=="object"&&(o.viewState=F(s)),this._map.isMoving())?(r.transform=this._renderTransform,t.call(r,o,n),r.transform=s,r):(t.call(r,o,n),r)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&t.fire(n);this._internalUpdate=!1;const o=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{A(this._renderTransform,o),t.transform=o}}}E.savedMaps=[];function Me(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||I.MapboxAccessToken}catch{}try{e=e||I.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const we=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Ee(e){if(!e)return null;const t=e.map,o={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:n=>{const r=t.transform;t.transform=e.transform;const s=t.project(n);return t.transform=r,s},unproject:n=>{const r=t.transform;t.transform=e.transform;const s=t.unproject(n);return t.transform=r,s},queryTerrainElevation:(n,r)=>{const s=t.transform;t.transform=e.transform;const a=t.queryTerrainElevation(n,r);return t.transform=s,a},queryRenderedFeatures:(n,r)=>{const s=t.transform;t.transform=e.transform;const a=t.queryRenderedFeatures(n,r);return t.transform=s,a}};for(const n of Le(t))!(n in o)&&!we.includes(n)&&(o[n]=t[n].bind(t));return o}function Le(e){const t=new Set;let o=e;for(;o;){for(const n of Object.getOwnPropertyNames(o))n[0]!=="_"&&typeof e[n]=="function"&&n!=="fire"&&n!=="setEventedParent"&&t.add(n);o=Object.getPrototypeOf(o)}return Array.from(t)}const Re=typeof document<"u"?i.useLayoutEffect:i.useEffect,je=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Te(e,t){for(const n of je)n in t&&(e[n]=t[n]);const{RTLTextPlugin:o="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;o&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(o,n=>{n&&console.error(n)},!0)}const L=i.createContext(null);function ke(e,t,o){const n=i.useContext(ve),[r,s]=i.useState(null),a=i.useRef(),{current:l}=i.useRef({mapLib:null,map:null});i.useEffect(()=>{const d=e.mapLib;let m=!0,y;return Promise.resolve(d||o).then(_=>{if(!m)return;if(!_)throw new Error("Invalid mapLib");const h="Map"in _?_:_.default;if(!h.Map)throw new Error("Invalid mapLib");if(Te(h,e),!h.supported||h.supported(e))e.reuseMaps&&(y=E.reuse(e,a.current)),y||(y=new E(h.Map,e,a.current)),l.map=Ee(y),l.mapLib=h,s(y),n==null||n.onMapMount(l.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(_=>{const{onError:h}=e;h?h({type:"error",target:null,originalEvent:null,error:_}):console.error(_)}),()=>{m=!1,y&&(n==null||n.onMapUnmount(e.id),e.reuseMaps?y.recycle():y.destroy())}},[]),Re(()=>{r&&r.setProps(e)}),i.useImperativeHandle(t,()=>l.map,[r]);const u=i.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),c={height:"100%"};return i.createElement("div",{id:e.id,ref:a,style:u},r&&i.createElement(L.Provider,{value:l},i.createElement("div",{"mapboxgl-children":"",style:c},e.children)))}const Pe=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function M(e,t){if(!e||!t)return;const o=e.style;for(const n in t){const r=t[n];Number.isFinite(r)&&!Pe.test(n)?o[n]=`${r}px`:o[n]=r}}function ze(e,t){const{map:o,mapLib:n}=i.useContext(L),r=i.useRef({props:e});r.current.props=e;const s=i.useMemo(()=>{let b=!1;i.Children.forEach(e.children,p=>{p&&(b=!0)});const w={...e,element:b?document.createElement("div"):null},C=new n.Marker(w);return C.setLngLat([e.longitude,e.latitude]),C.getElement().addEventListener("click",p=>{var x,g;(g=(x=r.current.props).onClick)===null||g===void 0||g.call(x,{type:"click",target:C,originalEvent:p})}),C.on("dragstart",p=>{var x,g;const S=p;S.lngLat=s.getLngLat(),(g=(x=r.current.props).onDragStart)===null||g===void 0||g.call(x,S)}),C.on("drag",p=>{var x,g;const S=p;S.lngLat=s.getLngLat(),(g=(x=r.current.props).onDrag)===null||g===void 0||g.call(x,S)}),C.on("dragend",p=>{var x,g;const S=p;S.lngLat=s.getLngLat(),(g=(x=r.current.props).onDragEnd)===null||g===void 0||g.call(x,S)}),C},[]);i.useEffect(()=>(s.addTo(o.getMap()),()=>{s.remove()}),[]);const{longitude:a,latitude:l,offset:u,style:c,draggable:d=!1,popup:m=null,rotation:y=0,rotationAlignment:_="auto",pitchAlignment:h="auto"}=e;return i.useEffect(()=>{M(s.getElement(),c)},[c]),i.useImperativeHandle(t,()=>s,[]),(s.getLngLat().lng!==a||s.getLngLat().lat!==l)&&s.setLngLat([a,l]),u&&!_e(s.getOffset(),u)&&s.setOffset(u),s.isDraggable()!==d&&s.setDraggable(d),s.getRotation()!==y&&s.setRotation(y),s.getRotationAlignment()!==_&&s.setRotationAlignment(_),s.getPitchAlignment()!==h&&s.setPitchAlignment(h),s.getPopup()!==m&&s.setPopup(m),V.createPortal(e.children,s.getElement())}i.memo(i.forwardRef(ze));function U(e){return new Set(e?e.trim().split(/\s+/):[])}function Ae(e,t){const{map:o,mapLib:n}=i.useContext(L),r=i.useMemo(()=>document.createElement("div"),[]),s=i.useRef({props:e});s.current.props=e;const a=i.useMemo(()=>{const l={...e},u=new n.Popup(l);return u.setLngLat([e.longitude,e.latitude]),u.once("open",c=>{var d,m;(m=(d=s.current.props).onOpen)===null||m===void 0||m.call(d,c)}),u},[]);if(i.useEffect(()=>{const l=u=>{var c,d;(d=(c=s.current.props).onClose)===null||d===void 0||d.call(c,u)};return a.on("close",l),a.setDOMContent(r).addTo(o.getMap()),()=>{a.off("close",l),a.isOpen()&&a.remove()}},[]),i.useEffect(()=>{M(a.getElement(),e.style)},[e.style]),i.useImperativeHandle(t,()=>a,[]),a.isOpen()&&((a.getLngLat().lng!==e.longitude||a.getLngLat().lat!==e.latitude)&&a.setLngLat([e.longitude,e.latitude]),e.offset&&!v(a.options.offset,e.offset)&&a.setOffset(e.offset),(a.options.anchor!==e.anchor||a.options.maxWidth!==e.maxWidth)&&(a.options.anchor=e.anchor,a.setMaxWidth(e.maxWidth)),a.options.className!==e.className)){const l=U(a.options.className),u=U(e.className);for(const c of l)u.has(c)||a.removeClassName(c);for(const c of u)l.has(c)||a.addClassName(c);a.options.className=e.className}return V.createPortal(e.children,r)}const Fe=i.memo(i.forwardRef(Ae));function T(e,t,o,n){const r=i.useContext(L),s=i.useMemo(()=>e(r),[]);return i.useEffect(()=>{const a=t,l=typeof t=="function"&&typeof o=="function"?t:null,u=typeof t=="function"?t:null,{map:c}=r;return c.hasControl(s)||(c.addControl(s,a==null?void 0:a.position),l&&l(r)),()=>{u&&u(r),c.hasControl(s)&&c.removeControl(s)}},[]),s}function Oe(e){const t=T(({mapLib:o})=>new o.AttributionControl(e),{position:e.position});return i.useEffect(()=>{M(t._container,e.style)},[e.style]),null}i.memo(Oe);function Ne(e){const t=T(({mapLib:o})=>new o.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return i.useEffect(()=>{M(t._controlContainer,e.style)},[e.style]),null}i.memo(Ne);function Ie(e,t){const o=i.useRef({props:e}),n=T(({mapLib:r})=>{const s=new r.GeolocateControl(e),a=s._setupUI;return s._setupUI=l=>{s._container.hasChildNodes()||a(l)},s.on("geolocate",l=>{var u,c;(c=(u=o.current.props).onGeolocate)===null||c===void 0||c.call(u,l)}),s.on("error",l=>{var u,c;(c=(u=o.current.props).onError)===null||c===void 0||c.call(u,l)}),s.on("outofmaxbounds",l=>{var u,c;(c=(u=o.current.props).onOutOfMaxBounds)===null||c===void 0||c.call(u,l)}),s.on("trackuserlocationstart",l=>{var u,c;(c=(u=o.current.props).onTrackUserLocationStart)===null||c===void 0||c.call(u,l)}),s.on("trackuserlocationend",l=>{var u,c;(c=(u=o.current.props).onTrackUserLocationEnd)===null||c===void 0||c.call(u,l)}),s},{position:e.position});return o.current.props=e,i.useImperativeHandle(t,()=>n,[]),i.useEffect(()=>{M(n._container,e.style)},[e.style]),null}i.memo(i.forwardRef(Ie));function Be(e){const t=T(({mapLib:o})=>new o.NavigationControl(e),{position:e.position});return i.useEffect(()=>{M(t._container,e.style)},[e.style]),null}const De=i.memo(Be);function We(e){const t=T(({mapLib:s})=>new s.ScaleControl(e),{position:e.position}),o=i.useRef(e),n=o.current;o.current=e;const{style:r}=e;return e.maxWidth!==void 0&&e.maxWidth!==n.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==n.unit&&t.setUnit(e.unit),i.useEffect(()=>{M(t._container,r)},[r]),null}i.memo(We);function k(e,t){if(!e)throw new Error(t)}function Ue(e,t,o,n){if(k(o.id===n.id,"layer id changed"),k(o.type===n.type,"layer type changed"),o.type==="custom"||n.type==="custom")return;const{layout:r={},paint:s={},filter:a,minzoom:l,maxzoom:u,beforeId:c}=o;if(c!==n.beforeId&&e.moveLayer(t,c),r!==n.layout){const d=n.layout||{};for(const m in r)v(r[m],d[m])||e.setLayoutProperty(t,m,r[m]);for(const m in d)r.hasOwnProperty(m)||e.setLayoutProperty(t,m,void 0)}if(s!==n.paint){const d=n.paint||{};for(const m in s)v(s[m],d[m])||e.setPaintProperty(t,m,s[m]);for(const m in d)s.hasOwnProperty(m)||e.setPaintProperty(t,m,void 0)}v(a,n.filter)||e.setFilter(t,a),(l!==n.minzoom||u!==n.maxzoom)&&e.setLayerZoomRange(t,l,u)}function Ze(e,t,o){if(e.style&&e.style._loaded&&(!("source"in o)||e.getSource(o.source))){const n={...o,id:t};delete n.beforeId,e.addLayer(n,o.beforeId)}}let He=0;function Ve(e){const t=i.useContext(L).map.getMap(),o=i.useRef(e),[,n]=i.useState(0),r=i.useMemo(()=>e.id||`jsx-layer-${He++}`,[]);if(i.useEffect(()=>{if(t){const a=()=>n(l=>l+1);return t.on("styledata",a),a(),()=>{t.off("styledata",a),t.style&&t.style._loaded&&t.getLayer(r)&&t.removeLayer(r)}}},[t]),t&&t.style&&t.getLayer(r))try{Ue(t,r,e,o.current)}catch(a){console.warn(a)}else Ze(t,r,e);return o.current=e,null}let qe=0;function $e(e,t,o){if(e.style&&e.style._loaded){const n={...o};return delete n.id,delete n.children,e.addSource(t,n),e.getSource(t)}return null}function Ge(e,t,o){k(t.id===o.id,"source id changed"),k(t.type===o.type,"source type changed");let n="",r=0;for(const a in t)a!=="children"&&a!=="id"&&!v(o[a],t[a])&&(n=a,r++);if(!r)return;const s=t.type;if(s==="geojson")e.setData(t.data);else if(s==="image")e.updateImage({url:t.url,coordinates:t.coordinates});else if("setCoordinates"in e&&r===1&&n==="coordinates")e.setCoordinates(t.coordinates);else if("setUrl"in e)switch(n){case"url":e.setUrl(t.url);break;case"tiles":e.setTiles(t.tiles);break}else console.warn(`Unable to update <Source> prop: ${n}`)}function Ke(e){const t=i.useContext(L).map.getMap(),o=i.useRef(e),[,n]=i.useState(0),r=i.useMemo(()=>e.id||`jsx-source-${qe++}`,[]);i.useEffect(()=>{if(t){const a=()=>setTimeout(()=>n(l=>l+1),0);return t.on("styledata",a),a(),()=>{var l;if(t.off("styledata",a),t.style&&t.style._loaded&&t.getSource(r)){const u=(l=t.getStyle())===null||l===void 0?void 0:l.layers;if(u)for(const c of u)c.source===r&&t.removeLayer(c.id);t.removeSource(r)}}}},[t]);let s=t&&t.style&&t.getSource(r);return s?Ge(s,e,o.current):s=$e(t,r,e),o.current=e,s&&i.Children.map(e.children,a=>a&&i.cloneElement(a,{source:r}))||null}const Qe=Y(()=>import("./maplibre-gl-DCDtuu7q.js").then(e=>e.m),__vite__mapDeps([0,1,2])),Je=i.forwardRef(function(t,o){return ke(t,o,Qe)}),Ye=Fe,Xe=De,Z=Ve,et=Ke;function H({lat:e,lon:t,display_name:o}){const{t:n}=P(),r=X(),s=()=>{r(`/simulation/${t}/${e}`)},[a,l]=i.useState(!0);return i.useEffect(()=>{console.log("effect changed"),l(!0)},[e,t]),f.jsx(f.Fragment,{children:a&&f.jsxs(Ye,{latitude:e,longitude:t,closeOnClick:!1,onClose:()=>l(!1),children:[f.jsx(de,{children:o}),f.jsx(j,{onClick:s,children:n("startSimulation")})]})})}function R({image:e,text:t}){return f.jsxs(me,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",children:[e&&f.jsx(ge,{src:e.src,alt:e.alt,style:{maxHeight:"200px",width:"auto",margin:"20px"}}),t]})}function tt(){const{isOpen:e,onOpen:t,onClose:o}=oe({defaultIsOpen:!0}),[n,r]=i.useState(1),{t:s,i18n:a}=P(),l=5,u=()=>{n<l&&r(n+1)},c=()=>{n>1&&r(n-1)};return f.jsxs(re,{isOpen:e,onClose:o,size:"xl",children:[f.jsx(se,{}),f.jsxs(ae,{children:[f.jsx(ie,{children:s("WelcomeMessage.title")}),f.jsx(le,{}),f.jsxs(ce,{children:[n===1&&f.jsx(R,{image:{src:"images/WelcomeMessage1.png",alt:"Screenshot from the Search Input, where some address is written down."},text:s("WelcomeMessage.firstPage")}),n===2&&f.jsx(R,{image:{src:"images/WelcomeMessage2.png",alt:"Screenshot from a possible Simulation Result, where the solar potential of a 3D building is shown."},text:s("WelcomeMessage.secondPage")}),n===3&&f.jsx(R,{image:{src:"images/WelcomeMessage3.png",alt:"Screenshot from a possible Simulation Result, where a PV system was created and the annual result was calculated."},text:s("WelcomeMessage.thirdPage")}),n===4&&f.jsx(R,{image:{src:"images/WelcomeMessage4.png",alt:"Screenshot from a possible Simulation Result, where a PV system was created and the annual result was calculated."},text:s("WelcomeMessage.fourthPage")}),n===5&&f.jsx(R,{text:s("WelcomeMessage.fifthPage")})]}),f.jsxs(ue,{children:[f.jsx(j,{mr:3,onClick:c,isDisabled:n===1,children:s("previous")}),n!=5&&f.jsx(j,{mr:3,onClick:u,isDisabled:n===l,children:s("next")}),n==5&&f.jsx(j,{mr:3,onClick:o,children:s("close")})]}),f.jsx(q,{justifyContent:"center",mb:4,children:Array.from({length:l},(d,m)=>m+1).map(d=>f.jsx(fe,{size:"10px",bg:n===d?"blue.500":"gray.300",m:1},d))})]})]})}function at(){const{t:e}=P(),t={id:"basemap-source",type:"raster",tiles:["https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/GLOBAL_WEBMERCATOR/{z}/{y}/{x}.png"],attribution:`
        Basiskarte &copy;
        <a href="https://www.bkg.bund.de" target="_blank">
          BKG
        </a>
        &nbsp;(
        <a href="https://www.govdata.de/dl-de/by-2-0" target="_blank">
          dl-de/by-2-0
        </a>
        )
    `},o={id:"basemap",type:"raster",source:"basemap-source"},[n,r]=i.useState({bounds:[5.98865807458,47.3024876979,15.0169958839,54.983104153]}),[s,a]=i.useState([]),l=ye(),u=h=>{if(h.length==0)console.error("No search results!"),l({title:e("noSearchResults.title"),description:e("noSearchResults.description"),status:"error",duration:4e3,isClosable:!0});else{h=[h[0]];const b=h.map(p=>p.lon),w=h.map(p=>p.lat),C=[Math.min(...b),Math.min(...w),Math.max(...b),Math.max(...w)];c.current.fitBounds(C,{maxZoom:17,speed:2})}a(h.map(b=>f.jsx(H,{...b},b.key)))},c=i.useRef(),d=i.useCallback(h=>{c.current=h,h!==null&&(h.getMap().dragRotate.disable(),h.getMap().touchZoomRotate.disableRotation())},[]),[m,y]=i.useState(null),_=i.useCallback(h=>{console.log(h);const{lng:b,lat:w}=h.lngLat;y([w,b])});return f.jsxs(ee,{description:"Berechne das Potential deiner Solaranlage.",children:[f.jsx("header",{children:f.jsx("div",{className:"title",children:f.jsx(pe,{callback:u})})}),f.jsx(tt,{}),f.jsxs("div",{className:"content",children:[f.jsxs(Je,{ref:d,...n,maxZoom:19,style:{width:"100%",height:"100%"},onMove:h=>r(h.viewState),onClick:_,attributionControl:!1,children:[f.jsx(Z,{id:"background",type:"background",paint:{"background-color":"lightgray"}}),f.jsx(et,{...t,children:f.jsx(Z,{...o})}),f.jsx(f.Fragment,{children:s}),m&&f.jsx(H,{lat:m[0],lon:m[1],display_name:e("map.userSelection")},"userSelectiion"),f.jsx(Xe,{position:"bottom-right",showCompass:!1})]}),f.jsx(he,{federalState:"",frontendState:"Map"})]})]})}export{at as default};
