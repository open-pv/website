const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/maplibre-gl-BfkRlP81.js","assets/index-HMZ1RkJ5.js","assets/index-BZpzF2_o.css"])))=>i.map(i=>d[i]);
import{u as $,a as G,r as i,c as K,f as Q,j as f,b as J,d as H,_ as Y,e as P,g as X,M as ee}from"./index-HMZ1RkJ5.js";import{T as te,B as k,L as ne,a as oe,u as se,M as re,b as ae,c as ie,d as le,e as ce,f as ue,C as de,g as fe,F as me}from"./Footer-BBZ63oEf.js";import{I as he,r as ge,M as ye}from"./location-oZDof6tA.js";import{I as pe}from"./chunk-QINAG4RG-CEug86qk.js";function ve(t){const{theme:e}=$(),o=G();return i.useMemo(()=>K(e.direction,{...o,...t}),[t,e.direction,o])}var q=Q(function(e,o){const{direction:n,align:s,justify:r,wrap:a,basis:l,grow:u,shrink:c,...d}=e,m={display:"flex",flexDirection:n,alignItems:s,justifyContent:r,flexWrap:a,flexBasis:l,flexGrow:u,flexShrink:c};return f.jsx(J.div,{ref:o,__css:m,...d})});q.displayName="Flex";const _e=i.createContext(null);function xe(t,e){const o=Array.isArray(t)?t[0]:t?t.x:0,n=Array.isArray(t)?t[1]:t?t.y:0,s=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0;return o===s&&n===r}function S(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let o=0;o<t.length;o++)if(!S(t[o],e[o]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const o=Object.keys(t),n=Object.keys(e);if(o.length!==n.length)return!1;for(const s of o)if(!e.hasOwnProperty(s)||!S(t[s],e[s]))return!1;return!0}return!1}function be(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function A(t,e){if(!t.getProjection)return;const o=t.getProjection(),n=e.getProjection();S(o,n)||e.setProjection(o)}function F(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function O(t,e){const o=e.viewState||e;let n=!1;if("longitude"in o&&"latitude"in o){const s=t.center;t.center=new s.constructor(o.longitude,o.latitude),n=n||s!==t.center}if("zoom"in o){const s=t.zoom;t.zoom=o.zoom,n=n||s!==t.zoom}if("bearing"in o){const s=t.bearing;t.bearing=o.bearing,n=n||s!==t.bearing}if("pitch"in o){const s=t.pitch;t.pitch=o.pitch,n=n||s!==t.pitch}return o.padding&&!t.isPaddingEqual(o.padding)&&(n=!0,t.padding=o.padding),n}const Se=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function I(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const n of t.layers)e[n.id]=n;const o=t.layers.map(n=>{let s=null;"interactive"in n&&(s=Object.assign({},n),delete s.interactive);const r=e[n.ref];if(r){s=s||Object.assign({},n),delete s.ref;for(const a of Se)a in r&&(s[a]=r[a])}return s||n});return{...t,layers:o}}var N={};const D={version:8,sources:{},layers:[]},W={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},z={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},B={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Ce=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Me=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class E{constructor(e,o,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=s=>{const r=this.props[B[s.type]];r?r(s):s.type==="error"&&console.error(s.error)},this._onPointerEvent=s=>{(s.type==="mousemove"||s.type==="mouseout")&&this._updateHover(s);const r=this.props[W[s.type]];r&&(this.props.interactiveLayerIds&&s.type!=="mouseover"&&s.type!=="mouseout"&&(s.features=this._hoveredFeatures||this._queryRenderedFeatures(s.point)),r(s),delete s.features)},this._onCameraEvent=s=>{if(!this._internalUpdate){const r=this.props[z[s.type]];r&&r(s)}s.type in this._deferredEvents&&(this._deferredEvents[s.type]=!1)},this._MapClass=e,this.props=o,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const o=this.props;this.props=e;const n=this._updateSettings(e,o);n&&this._createShadowTransform(this._map);const s=this._updateSize(e),r=this._updateViewState(e,!0);this._updateStyle(e,o),this._updateStyleComponents(e,o),this._updateHandlers(e,o),(n||s||r&&!this._map.isMoving())&&this.redraw()}static reuse(e,o){const n=E.savedMaps.pop();if(!n)return null;const s=n.map,r=s.getContainer();for(o.className=r.className;r.childNodes.length>0;)o.appendChild(r.childNodes[0]);s._container=o;const a=s._resizeObserver;a&&(a.disconnect(),a.observe(o)),n.setProps({...e,styleDiffing:!1}),s.resize();const{initialViewState:l}=e;return l&&(l.bounds?s.fitBounds(l.bounds,{...l.fitBoundsOptions,duration:0}):n._updateViewState(l,!1)),s.isStyleLoaded()?s.fire("load"):s.once("styledata",()=>s.fire("load")),s._update(),n}_initialize(e){const{props:o}=this,{mapStyle:n=D}=o,s={...o,...o.initialViewState,accessToken:o.mapboxAccessToken||we()||null,container:e,style:I(n)},r=s.initialViewState||s.viewState||s;if(Object.assign(s,{center:[r.longitude||0,r.latitude||0],zoom:r.zoom||0,pitch:r.pitch||0,bearing:r.bearing||0}),o.gl){const d=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=d,o.gl)}const a=new this._MapClass(s);r.padding&&a.setPadding(r.padding),o.cursor&&(a.getCanvas().style.cursor=o.cursor),this._createShadowTransform(a);const l=a._render;a._render=d=>{this._inRender=!0,l.call(a,d),this._inRender=!1};const u=a._renderTaskQueue.run;a._renderTaskQueue.run=d=>{u.call(a._renderTaskQueue,d),this._onBeforeRepaint()},a.on("render",()=>this._onAfterRepaint());const c=a.fire;a.fire=this._fireEvent.bind(this,c),a.on("resize",()=>{this._renderTransform.resize(a.transform.width,a.transform.height)}),a.on("styledata",()=>{this._updateStyleComponents(this.props,{}),A(a.transform,this._renderTransform)}),a.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const d in W)a.on(d,this._onPointerEvent);for(const d in z)a.on(d,this._onCameraEvent);for(const d in B)a.on(d,this._onEvent);this._map=a}recycle(){const o=this.map.getContainer().querySelector("[mapboxgl-children]");o==null||o.remove(),E.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const o=be(e.transform);e.painter.transform=o,this._renderTransform=o}_updateSize(e){const{viewState:o}=e;if(o){const n=this._map;if(o.width!==n.transform.width||o.height!==n.transform.height)return n.resize(),!0}return!1}_updateViewState(e,o){if(this._internalUpdate)return!1;const n=this._map,s=this._renderTransform,{zoom:r,pitch:a,bearing:l}=s,u=n.isMoving();u&&(s.cameraElevationReference="sea");const c=O(s,{...F(n.transform),...e});if(u&&(s.cameraElevationReference="ground"),c&&o){const d=this._deferredEvents;d.move=!0,d.zoom||(d.zoom=r!==s.zoom),d.rotate||(d.rotate=l!==s.bearing),d.pitch||(d.pitch=a!==s.pitch)}return u||O(n.transform,e),c}_updateSettings(e,o){const n=this._map;let s=!1;for(const r of Ce)if(r in e&&!S(e[r],o[r])){s=!0;const a=n[`set${r[0].toUpperCase()}${r.slice(1)}`];a==null||a.call(n,e[r])}return s}_updateStyle(e,o){if(e.cursor!==o.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==o.mapStyle){const{mapStyle:n=D,styleDiffing:s=!0}=e,r={diff:s};return"localIdeographFontFamily"in e&&(r.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(I(n),r),!0}return!1}_updateStyleComponents(e,o){const n=this._map;let s=!1;return n.isStyleLoaded()&&("light"in e&&n.setLight&&!S(e.light,o.light)&&(s=!0,n.setLight(e.light)),"fog"in e&&n.setFog&&!S(e.fog,o.fog)&&(s=!0,n.setFog(e.fog)),"terrain"in e&&n.setTerrain&&!S(e.terrain,o.terrain)&&(!e.terrain||n.getSource(e.terrain.source))&&(s=!0,n.setTerrain(e.terrain))),s}_updateHandlers(e,o){var n,s;const r=this._map;let a=!1;for(const l of Me){const u=(n=e[l])!==null&&n!==void 0?n:!0,c=(s=o[l])!==null&&s!==void 0?s:!0;S(u,c)||(a=!0,u?r[l].enable(u):r[l].disable())}return a}_queryRenderedFeatures(e){const o=this._map,n=o.transform,{interactiveLayerIds:s=[]}=this.props;try{return o.transform=this._renderTransform,o.queryRenderedFeatures(e,{layers:s.filter(o.getLayer.bind(o))})}catch{return[]}finally{o.transform=n}}_updateHover(e){var o;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const r=e.type,a=((o=this._hoveredFeatures)===null||o===void 0?void 0:o.length)>0,l=this._queryRenderedFeatures(e.point),u=l.length>0;!u&&a&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=l,u&&!a&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=r}else this._hoveredFeatures=null}_fireEvent(e,o,n){const s=this._map,r=s.transform,a=typeof o=="string"?o:o.type;return a==="move"&&this._updateViewState(this.props,!1),a in z&&(typeof o=="object"&&(o.viewState=F(r)),this._map.isMoving())?(s.transform=this._renderTransform,e.call(s,o,n),s.transform=r,s):(e.call(s,o,n),s)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&e.fire(n);this._internalUpdate=!1;const o=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{A(this._renderTransform,o),e.transform=o}}}E.savedMaps=[];function we(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||N.MapboxAccessToken}catch{}try{t=t||N.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const Ee=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Le(t){if(!t)return null;const e=t.map,o={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:n=>{const s=e.transform;e.transform=t.transform;const r=e.project(n);return e.transform=s,r},unproject:n=>{const s=e.transform;e.transform=t.transform;const r=e.unproject(n);return e.transform=s,r},queryTerrainElevation:(n,s)=>{const r=e.transform;e.transform=t.transform;const a=e.queryTerrainElevation(n,s);return e.transform=r,a},queryRenderedFeatures:(n,s)=>{const r=e.transform;e.transform=t.transform;const a=e.queryRenderedFeatures(n,s);return e.transform=r,a}};for(const n of je(e))!(n in o)&&!Ee.includes(n)&&(o[n]=e[n].bind(e));return o}function je(t){const e=new Set;let o=t;for(;o;){for(const n of Object.getOwnPropertyNames(o))n[0]!=="_"&&typeof t[n]=="function"&&n!=="fire"&&n!=="setEventedParent"&&e.add(n);o=Object.getPrototypeOf(o)}return Array.from(e)}const ke=typeof document<"u"?i.useLayoutEffect:i.useEffect,Re=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Te(t,e){for(const n of Re)n in e&&(t[n]=e[n]);const{RTLTextPlugin:o="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;o&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(o,n=>{n&&console.error(n)},!0)}const L=i.createContext(null);function Pe(t,e,o){const n=i.useContext(_e),[s,r]=i.useState(null),a=i.useRef(),{current:l}=i.useRef({mapLib:null,map:null});i.useEffect(()=>{const d=t.mapLib;let m=!0,g;return Promise.resolve(d||o).then(y=>{if(!m)return;if(!y)throw new Error("Invalid mapLib");const h="Map"in y?y:y.default;if(!h.Map)throw new Error("Invalid mapLib");if(Te(h,t),!h.supported||h.supported(t))t.reuseMaps&&(g=E.reuse(t,a.current)),g||(g=new E(h.Map,t,a.current)),l.map=Le(g),l.mapLib=h,r(g),n==null||n.onMapMount(l.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(y=>{const{onError:h}=t;h?h({type:"error",target:null,originalEvent:null,error:y}):console.error(y)}),()=>{m=!1,g&&(n==null||n.onMapUnmount(t.id),t.reuseMaps?g.recycle():g.destroy())}},[]),ke(()=>{s&&s.setProps(t)}),i.useImperativeHandle(e,()=>l.map,[s]);const u=i.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),c={height:"100%"};return i.createElement("div",{id:t.id,ref:a,style:u},s&&i.createElement(L.Provider,{value:l},i.createElement("div",{"mapboxgl-children":"",style:c},t.children)))}const ze=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function w(t,e){if(!t||!e)return;const o=t.style;for(const n in e){const s=e[n];Number.isFinite(s)&&!ze.test(n)?o[n]=`${s}px`:o[n]=s}}function Ae(t,e){const{map:o,mapLib:n}=i.useContext(L),s=i.useRef({props:t});s.current.props=t;const r=i.useMemo(()=>{let v=!1;i.Children.forEach(t.children,b=>{b&&(v=!0)});const _={...t,element:v?document.createElement("div"):null},x=new n.Marker(_);return x.setLngLat([t.longitude,t.latitude]),x.getElement().addEventListener("click",b=>{var C,p;(p=(C=s.current.props).onClick)===null||p===void 0||p.call(C,{type:"click",target:x,originalEvent:b})}),x.on("dragstart",b=>{var C,p;const M=b;M.lngLat=r.getLngLat(),(p=(C=s.current.props).onDragStart)===null||p===void 0||p.call(C,M)}),x.on("drag",b=>{var C,p;const M=b;M.lngLat=r.getLngLat(),(p=(C=s.current.props).onDrag)===null||p===void 0||p.call(C,M)}),x.on("dragend",b=>{var C,p;const M=b;M.lngLat=r.getLngLat(),(p=(C=s.current.props).onDragEnd)===null||p===void 0||p.call(C,M)}),x},[]);i.useEffect(()=>(r.addTo(o.getMap()),()=>{r.remove()}),[]);const{longitude:a,latitude:l,offset:u,style:c,draggable:d=!1,popup:m=null,rotation:g=0,rotationAlignment:y="auto",pitchAlignment:h="auto"}=t;return i.useEffect(()=>{w(r.getElement(),c)},[c]),i.useImperativeHandle(e,()=>r,[]),(r.getLngLat().lng!==a||r.getLngLat().lat!==l)&&r.setLngLat([a,l]),u&&!xe(r.getOffset(),u)&&r.setOffset(u),r.isDraggable()!==d&&r.setDraggable(d),r.getRotation()!==g&&r.setRotation(g),r.getRotationAlignment()!==y&&r.setRotationAlignment(y),r.getPitchAlignment()!==h&&r.setPitchAlignment(h),r.getPopup()!==m&&r.setPopup(m),H.createPortal(t.children,r.getElement())}i.memo(i.forwardRef(Ae));function U(t){return new Set(t?t.trim().split(/\s+/):[])}function Fe(t,e){const{map:o,mapLib:n}=i.useContext(L),s=i.useMemo(()=>document.createElement("div"),[]),r=i.useRef({props:t});r.current.props=t;const a=i.useMemo(()=>{const l={...t},u=new n.Popup(l);return u.setLngLat([t.longitude,t.latitude]),u.once("open",c=>{var d,m;(m=(d=r.current.props).onOpen)===null||m===void 0||m.call(d,c)}),u},[]);if(i.useEffect(()=>{const l=u=>{var c,d;(d=(c=r.current.props).onClose)===null||d===void 0||d.call(c,u)};return a.on("close",l),a.setDOMContent(s).addTo(o.getMap()),()=>{a.off("close",l),a.isOpen()&&a.remove()}},[]),i.useEffect(()=>{w(a.getElement(),t.style)},[t.style]),i.useImperativeHandle(e,()=>a,[]),a.isOpen()&&((a.getLngLat().lng!==t.longitude||a.getLngLat().lat!==t.latitude)&&a.setLngLat([t.longitude,t.latitude]),t.offset&&!S(a.options.offset,t.offset)&&a.setOffset(t.offset),(a.options.anchor!==t.anchor||a.options.maxWidth!==t.maxWidth)&&(a.options.anchor=t.anchor,a.setMaxWidth(t.maxWidth)),a.options.className!==t.className)){const l=U(a.options.className),u=U(t.className);for(const c of l)u.has(c)||a.removeClassName(c);for(const c of u)l.has(c)||a.addClassName(c);a.options.className=t.className}return H.createPortal(t.children,s)}const Oe=i.memo(i.forwardRef(Fe));function R(t,e,o,n){const s=i.useContext(L),r=i.useMemo(()=>t(s),[]);return i.useEffect(()=>{const a=e,l=typeof e=="function"&&typeof o=="function"?e:null,u=typeof e=="function"?e:null,{map:c}=s;return c.hasControl(r)||(c.addControl(r,a==null?void 0:a.position),l&&l(s)),()=>{u&&u(s),c.hasControl(r)&&c.removeControl(r)}},[]),r}function Ie(t){const e=R(({mapLib:o})=>new o.AttributionControl(t),{position:t.position});return i.useEffect(()=>{w(e._container,t.style)},[t.style]),null}i.memo(Ie);function Ne(t){const e=R(({mapLib:o})=>new o.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return i.useEffect(()=>{w(e._controlContainer,t.style)},[t.style]),null}i.memo(Ne);function De(t,e){const o=i.useRef({props:t}),n=R(({mapLib:s})=>{const r=new s.GeolocateControl(t),a=r._setupUI;return r._setupUI=l=>{r._container.hasChildNodes()||a(l)},r.on("geolocate",l=>{var u,c;(c=(u=o.current.props).onGeolocate)===null||c===void 0||c.call(u,l)}),r.on("error",l=>{var u,c;(c=(u=o.current.props).onError)===null||c===void 0||c.call(u,l)}),r.on("outofmaxbounds",l=>{var u,c;(c=(u=o.current.props).onOutOfMaxBounds)===null||c===void 0||c.call(u,l)}),r.on("trackuserlocationstart",l=>{var u,c;(c=(u=o.current.props).onTrackUserLocationStart)===null||c===void 0||c.call(u,l)}),r.on("trackuserlocationend",l=>{var u,c;(c=(u=o.current.props).onTrackUserLocationEnd)===null||c===void 0||c.call(u,l)}),r},{position:t.position});return o.current.props=t,i.useImperativeHandle(e,()=>n,[]),i.useEffect(()=>{w(n._container,t.style)},[t.style]),null}i.memo(i.forwardRef(De));function We(t){const e=R(({mapLib:o})=>new o.NavigationControl(t),{position:t.position});return i.useEffect(()=>{w(e._container,t.style)},[t.style]),null}const Be=i.memo(We);function Ue(t){const e=R(({mapLib:r})=>new r.ScaleControl(t),{position:t.position}),o=i.useRef(t),n=o.current;o.current=t;const{style:s}=t;return t.maxWidth!==void 0&&t.maxWidth!==n.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==n.unit&&e.setUnit(t.unit),i.useEffect(()=>{w(e._container,s)},[s]),null}i.memo(Ue);function T(t,e){if(!t)throw new Error(e)}function Ze(t,e,o,n){if(T(o.id===n.id,"layer id changed"),T(o.type===n.type,"layer type changed"),o.type==="custom"||n.type==="custom")return;const{layout:s={},paint:r={},filter:a,minzoom:l,maxzoom:u,beforeId:c}=o;if(c!==n.beforeId&&t.moveLayer(e,c),s!==n.layout){const d=n.layout||{};for(const m in s)S(s[m],d[m])||t.setLayoutProperty(e,m,s[m]);for(const m in d)s.hasOwnProperty(m)||t.setLayoutProperty(e,m,void 0)}if(r!==n.paint){const d=n.paint||{};for(const m in r)S(r[m],d[m])||t.setPaintProperty(e,m,r[m]);for(const m in d)r.hasOwnProperty(m)||t.setPaintProperty(e,m,void 0)}S(a,n.filter)||t.setFilter(e,a),(l!==n.minzoom||u!==n.maxzoom)&&t.setLayerZoomRange(e,l,u)}function Ve(t,e,o){if(t.style&&t.style._loaded&&(!("source"in o)||t.getSource(o.source))){const n={...o,id:e};delete n.beforeId,t.addLayer(n,o.beforeId)}}let He=0;function qe(t){const e=i.useContext(L).map.getMap(),o=i.useRef(t),[,n]=i.useState(0),s=i.useMemo(()=>t.id||`jsx-layer-${He++}`,[]);if(i.useEffect(()=>{if(e){const a=()=>n(l=>l+1);return e.on("styledata",a),a(),()=>{e.off("styledata",a),e.style&&e.style._loaded&&e.getLayer(s)&&e.removeLayer(s)}}},[e]),e&&e.style&&e.getLayer(s))try{Ze(e,s,t,o.current)}catch(a){console.warn(a)}else Ve(e,s,t);return o.current=t,null}let $e=0;function Ge(t,e,o){if(t.style&&t.style._loaded){const n={...o};return delete n.id,delete n.children,t.addSource(e,n),t.getSource(e)}return null}function Ke(t,e,o){T(e.id===o.id,"source id changed"),T(e.type===o.type,"source type changed");let n="",s=0;for(const a in e)a!=="children"&&a!=="id"&&!S(o[a],e[a])&&(n=a,s++);if(!s)return;const r=e.type;if(r==="geojson")t.setData(e.data);else if(r==="image")t.updateImage({url:e.url,coordinates:e.coordinates});else if("setCoordinates"in t&&s===1&&n==="coordinates")t.setCoordinates(e.coordinates);else if("setUrl"in t)switch(n){case"url":t.setUrl(e.url);break;case"tiles":t.setTiles(e.tiles);break}else console.warn(`Unable to update <Source> prop: ${n}`)}function Qe(t){const e=i.useContext(L).map.getMap(),o=i.useRef(t),[,n]=i.useState(0),s=i.useMemo(()=>t.id||`jsx-source-${$e++}`,[]);i.useEffect(()=>{if(e){const a=()=>setTimeout(()=>n(l=>l+1),0);return e.on("styledata",a),a(),()=>{var l;if(e.off("styledata",a),e.style&&e.style._loaded&&e.getSource(s)){const u=(l=e.getStyle())===null||l===void 0?void 0:l.layers;if(u)for(const c of u)c.source===s&&e.removeLayer(c.id);e.removeSource(s)}}}},[e]);let r=e&&e.style&&e.getSource(s);return r?Ke(r,t,o.current):r=Ge(e,s,t),o.current=t,r&&i.Children.map(t.children,a=>a&&i.cloneElement(a,{source:s}))||null}const Je=Y(()=>import("./maplibre-gl-BfkRlP81.js").then(t=>t.m),__vite__mapDeps([0,1,2])),Ye=i.forwardRef(function(e,o){return Pe(e,o,Je)}),Xe=Oe,et=Be,Z=qe,tt=Qe;function V({lat:t,lon:e,display_name:o}){const{t:n}=P(),s=X(),r=()=>{s(`/simulation/${e}/${t}`)},[a,l]=i.useState(!0);return i.useEffect(()=>{console.log("effect changed"),l(!0)},[t,e]),f.jsx(f.Fragment,{children:a&&f.jsxs(Xe,{latitude:t,longitude:e,closeOnClick:!1,onClose:()=>l(!1),children:[f.jsx(te,{children:o}),f.jsx(k,{onClick:r,children:n("startSimulation")})]})})}function nt({callback:t}){const[e,o]=i.useState(""),[n,s]=i.useState([]),[r,a]=i.useState(!1);window.searchFieldInput=e;const{t:l}=P();i.useEffect(()=>{const m=setTimeout(async()=>{if(e||a(!1),!r)if(e.length>2)try{const g=e.split(" ");let y=null;for(const _ of g)if(/^\d+[a-zA-Z]?$/.test(_)){y=_;break}const v=await(await fetch(`https://photon.komoot.io/api/?q=${encodeURIComponent(e)}&bbox=5.98865807458,47.3024876979,15.0169958839,54.983104153&limit=5&lang=de&layer=street`)).json();console.log("data",v),s(v.features.map(_=>{let x=_.properties.name;return y&&(x+=" "+y),x+=", "+_.properties.postcode+" "+_.properties.city,x}))}catch(g){console.error("Error fetching suggestions:",g)}else s([])},300);return()=>clearTimeout(m)},[e,r]);const u=async d=>{d.preventDefault();const m=await ge(e);console.warn(m),t(m)},c=d=>{o(d),s([]),a(!0)};return f.jsxs("form",{onSubmit:u,style:{display:"flex",flexDirection:"column",alignItems:"stretch",padding:"5px",position:"relative"},children:[f.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[f.jsx(he,{value:e,placeholder:l("searchField.placeholder"),onChange:d=>o(d.target.value),margin:"5px"}),f.jsx(k,{margin:"5px",minWidth:"150px",type:"submit",children:l("Search")})]}),n.length>0&&f.jsx(ne,{borderWidth:1,borderColor:"gray.200",mt:2,position:"absolute",top:"100%",left:0,right:0,zIndex:1,bg:"white",boxShadow:"md",children:n.map((d,m)=>f.jsx(oe,{p:2,cursor:"pointer",_hover:{backgroundColor:"gray.100"},onClick:()=>c(d),children:d},m))})]})}function j({image:t,text:e}){return f.jsxs(fe,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",children:[t&&f.jsx(pe,{src:t.src,alt:t.alt,style:{maxHeight:"200px",width:"auto",margin:"20px"}}),e]})}function ot(){const{isOpen:t,onOpen:e,onClose:o}=se({defaultIsOpen:!0}),[n,s]=i.useState(1),{t:r,i18n:a}=P(),l=5,u=()=>{n<l&&s(n+1)},c=()=>{n>1&&s(n-1)};return f.jsxs(re,{isOpen:t,onClose:o,size:"xl",children:[f.jsx(ae,{}),f.jsxs(ie,{children:[f.jsx(le,{children:r("WelcomeMessage.title")}),f.jsx(ce,{}),f.jsxs(ue,{children:[n===1&&f.jsx(j,{image:{src:"images/WelcomeMessage1.png",alt:"Screenshot from the Search Input, where some address is written down."},text:r("WelcomeMessage.firstPage")}),n===2&&f.jsx(j,{image:{src:"images/WelcomeMessage2.png",alt:"Screenshot from a possible Simulation Result, where the solar potential of a 3D building is shown."},text:r("WelcomeMessage.secondPage")}),n===3&&f.jsx(j,{image:{src:"images/WelcomeMessage3.png",alt:"Screenshot from a possible Simulation Result, where a PV system was created and the annual result was calculated."},text:r("WelcomeMessage.thirdPage")}),n===4&&f.jsx(j,{image:{src:"images/WelcomeMessage4.png",alt:"Screenshot from a possible Simulation Result, where a PV system was created and the annual result was calculated."},text:r("WelcomeMessage.fourthPage")}),n===5&&f.jsx(j,{text:r("WelcomeMessage.fifthPage")})]}),f.jsxs(ye,{children:[f.jsx(k,{mr:3,onClick:c,isDisabled:n===1,children:r("previous")}),n!=5&&f.jsx(k,{mr:3,onClick:u,isDisabled:n===l,children:r("next")}),n==5&&f.jsx(k,{mr:3,onClick:o,children:r("close")})]}),f.jsx(q,{justifyContent:"center",mb:4,children:Array.from({length:l},(d,m)=>m+1).map(d=>f.jsx(de,{size:"10px",bg:n===d?"blue.500":"gray.300",m:1},d))})]})]})}function lt(){const{t}=P(),e={id:"basemap-source",type:"raster",tiles:["https://sgx.geodatenzentrum.de/wmts_basemapde/tile/1.0.0/de_basemapde_web_raster_farbe/default/GLOBAL_WEBMERCATOR/{z}/{y}/{x}.png"],attribution:`
        Basiskarte &copy;
        <a href="https://www.bkg.bund.de" target="_blank">
          BKG
        </a>
        &nbsp;(
        <a href="https://www.govdata.de/dl-de/by-2-0" target="_blank">
          dl-de/by-2-0
        </a>
        )
    `},o={id:"basemap",type:"raster",source:"basemap-source"},[n,s]=i.useState({bounds:[5.98865807458,47.3024876979,15.0169958839,54.983104153]}),[r,a]=i.useState([]),l=ve(),u=h=>{if(h.length==0)console.error("No search results!"),l({title:t("noSearchResults.title"),description:t("noSearchResults.description"),status:"error",duration:4e3,isClosable:!0});else{h=[h[0]];const v=h.map(b=>b.lon),_=h.map(b=>b.lat),x=[Math.min(...v),Math.min(..._),Math.max(...v),Math.max(..._)];c.current.fitBounds(x,{maxZoom:17,speed:2})}a(h.map(v=>f.jsx(V,{...v},v.key)))},c=i.useRef(),d=i.useCallback(h=>{c.current=h,h!==null&&(h.getMap().dragRotate.disable(),h.getMap().touchZoomRotate.disableRotation())},[]),[m,g]=i.useState(null),y=i.useCallback(h=>{console.log(h);const{lng:v,lat:_}=h.lngLat;g([_,v])});return f.jsxs(ee,{description:"Berechne das Potential deiner Solaranlage.",children:[f.jsx("header",{children:f.jsx("div",{className:"title",children:f.jsx(nt,{callback:u})})}),f.jsx(ot,{}),f.jsxs("div",{className:"content",children:[f.jsxs(Ye,{ref:d,...n,maxZoom:19,style:{width:"100%",height:"100%"},onMove:h=>s(h.viewState),onClick:y,attributionControl:!1,children:[f.jsx(Z,{id:"background",type:"background",paint:{"background-color":"lightgray"}}),f.jsx(tt,{...e,children:f.jsx(Z,{...o})}),f.jsx(f.Fragment,{children:r}),m&&f.jsx(V,{lat:m[0],lon:m[1],display_name:t("map.userSelection")},"userSelectiion"),f.jsx(et,{position:"bottom-right",showCompass:!1})]}),f.jsx(me,{federalState:"",frontendState:"Map"})]})]})}export{lt as default};
