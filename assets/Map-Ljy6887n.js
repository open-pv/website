const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/maplibre-gl-CNB64yil.js","assets/index-Djx74p82.js","assets/index-BZpzF2_o.css"])))=>i.map(i=>d[i]);
import{f as N,j as d,c as te,t as R,r as I,a as ne,u as oe,b as se,d as i,e as Q,_ as re,g as P,h as ae,M as ie}from"./index-Djx74p82.js";import{B as J,T as le,a as j,L as ce,b as ue,u as de,M as fe,c as me,d as he,e as ge,f as pe,g as ve,F as ye}from"./Footer-DN6Sn8PK.js";import{I as _e,r as O,M as xe}from"./location-pMETmuB9.js";import{I as be}from"./image-LEY6FPoh.js";const Y=N(function(t,s){const{size:n,centerContent:o=!0,...r}=t,a=o?{display:"flex",alignItems:"center",justifyContent:"center"}:{};return d.jsx(J,{ref:s,boxSize:n,__css:{...a,flexShrink:0,flexGrow:0},...r})});Y.displayName="Square";const X=N(function(t,s){const{size:n,...o}=t;return d.jsx(Y,{size:n,ref:s,borderRadius:"9999px",...o})});X.displayName="Circle";const ee=N(function(t,s){const{direction:n,align:o,justify:r,wrap:a,basis:l,grow:u,shrink:c,...f}=t,_={display:"flex",flexDirection:n,alignItems:o,justifyContent:r,flexWrap:a,flexBasis:l,flexGrow:u,flexShrink:c};return d.jsx(te.div,{ref:s,__css:_,...f})});ee.displayName="Flex";function Ce(e,t){const s=e??"bottom",o={"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[s];return(o==null?void 0:o[t])??s}function Se(e,t){const s=o=>({...t,...o,position:Ce((o==null?void 0:o.position)??(t==null?void 0:t.position),e)}),n=o=>{const r=s(o),a=ne(r);return R.notify(a,r)};return n.update=(o,r)=>{R.update(o,s(r))},n.promise=(o,r)=>{const a=n({...r.loading,status:"loading",duration:null});o.then(l=>n.update(a,{status:"success",duration:5e3,...I(r.success,l)})).catch(l=>n.update(a,{status:"error",duration:5e3,...I(r.error,l)}))},n.closeAll=R.closeAll,n.close=R.close,n.isActive=R.isActive,n}function Me(e){const{theme:t}=oe(),s=se();return i.useMemo(()=>Se(t.direction,{...s,...e}),[e,t.direction,s])}const we=i.createContext(null);function Ee(e,t){const s=Array.isArray(e)?e[0]:e?e.x:0,n=Array.isArray(e)?e[1]:e?e.y:0,o=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0;return s===o&&n===r}function M(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let s=0;s<e.length;s++)if(!M(e[s],t[s]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const s=Object.keys(e),n=Object.keys(t);if(s.length!==n.length)return!1;for(const o of s)if(!t.hasOwnProperty(o)||!M(e[o],t[o]))return!1;return!0}return!1}function Le(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function W(e,t){if(!e.getProjection)return;const s=e.getProjection(),n=t.getProjection();M(s,n)||t.setProjection(s)}function B(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function V(e,t){const s=t.viewState||t;let n=!1;if("longitude"in s&&"latitude"in s){const o=e.center;e.center=new o.constructor(s.longitude,s.latitude),n=n||o!==e.center}if("zoom"in s){const o=e.zoom;e.zoom=s.zoom,n=n||o!==e.zoom}if("bearing"in s){const o=e.bearing;e.bearing=s.bearing,n=n||o!==e.bearing}if("pitch"in s){const o=e.pitch;e.pitch=s.pitch,n=n||o!==e.pitch}return s.padding&&!e.isPaddingEqual(s.padding)&&(n=!0,e.padding=s.padding),n}const Re=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function U(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const n of e.layers)t[n.id]=n;const s=e.layers.map(n=>{let o=null;"interactive"in n&&(o=Object.assign({},n),delete o.interactive);const r=t[n.ref];if(r){o=o||Object.assign({},n),delete o.ref;for(const a of Re)a in r&&(o[a]=r[a])}return o||n});return{...e,layers:s}}var Z={};const H={version:8,sources:{},layers:[]},q={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},F={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},$={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Te=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],je=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class L{constructor(t,s,n){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=o=>{const r=this.props[$[o.type]];r?r(o):o.type==="error"&&console.error(o.error)},this._onPointerEvent=o=>{(o.type==="mousemove"||o.type==="mouseout")&&this._updateHover(o);const r=this.props[q[o.type]];r&&(this.props.interactiveLayerIds&&o.type!=="mouseover"&&o.type!=="mouseout"&&(o.features=this._hoveredFeatures||this._queryRenderedFeatures(o.point)),r(o),delete o.features)},this._onCameraEvent=o=>{if(!this._internalUpdate){const r=this.props[F[o.type]];r&&r(o)}o.type in this._deferredEvents&&(this._deferredEvents[o.type]=!1)},this._MapClass=t,this.props=s,this._initialize(n)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const s=this.props;this.props=t;const n=this._updateSettings(t,s);n&&this._createShadowTransform(this._map);const o=this._updateSize(t),r=this._updateViewState(t,!0);this._updateStyle(t,s),this._updateStyleComponents(t,s),this._updateHandlers(t,s),(n||o||r&&!this._map.isMoving())&&this.redraw()}static reuse(t,s){const n=L.savedMaps.pop();if(!n)return null;const o=n.map,r=o.getContainer();for(s.className=r.className;r.childNodes.length>0;)s.appendChild(r.childNodes[0]);o._container=s;const a=o._resizeObserver;a&&(a.disconnect(),a.observe(s)),n.setProps({...t,styleDiffing:!1}),o.resize();const{initialViewState:l}=t;return l&&(l.bounds?o.fitBounds(l.bounds,{...l.fitBoundsOptions,duration:0}):n._updateViewState(l,!1)),o.isStyleLoaded()?o.fire("load"):o.once("styledata",()=>o.fire("load")),o._update(),n}_initialize(t){const{props:s}=this,{mapStyle:n=H}=s,o={...s,...s.initialViewState,accessToken:s.mapboxAccessToken||ke()||null,container:t,style:U(n)},r=o.initialViewState||o.viewState||o;if(Object.assign(o,{center:[r.longitude||0,r.latitude||0],zoom:r.zoom||0,pitch:r.pitch||0,bearing:r.bearing||0}),s.gl){const f=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=f,s.gl)}const a=new this._MapClass(o);r.padding&&a.setPadding(r.padding),s.cursor&&(a.getCanvas().style.cursor=s.cursor),this._createShadowTransform(a);const l=a._render;a._render=f=>{this._inRender=!0,l.call(a,f),this._inRender=!1};const u=a._renderTaskQueue.run;a._renderTaskQueue.run=f=>{u.call(a._renderTaskQueue,f),this._onBeforeRepaint()},a.on("render",()=>this._onAfterRepaint());const c=a.fire;a.fire=this._fireEvent.bind(this,c),a.on("resize",()=>{this._renderTransform.resize(a.transform.width,a.transform.height)}),a.on("styledata",()=>{this._updateStyleComponents(this.props,{}),W(a.transform,this._renderTransform)}),a.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const f in q)a.on(f,this._onPointerEvent);for(const f in F)a.on(f,this._onCameraEvent);for(const f in $)a.on(f,this._onEvent);this._map=a}recycle(){const s=this.map.getContainer().querySelector("[mapboxgl-children]");s==null||s.remove(),L.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const s=Le(t.transform);t.painter.transform=s,this._renderTransform=s}_updateSize(t){const{viewState:s}=t;if(s){const n=this._map;if(s.width!==n.transform.width||s.height!==n.transform.height)return n.resize(),!0}return!1}_updateViewState(t,s){if(this._internalUpdate)return!1;const n=this._map,o=this._renderTransform,{zoom:r,pitch:a,bearing:l}=o,u=n.isMoving();u&&(o.cameraElevationReference="sea");const c=V(o,{...B(n.transform),...t});if(u&&(o.cameraElevationReference="ground"),c&&s){const f=this._deferredEvents;f.move=!0,f.zoom||(f.zoom=r!==o.zoom),f.rotate||(f.rotate=l!==o.bearing),f.pitch||(f.pitch=a!==o.pitch)}return u||V(n.transform,t),c}_updateSettings(t,s){const n=this._map;let o=!1;for(const r of Te)if(r in t&&!M(t[r],s[r])){o=!0;const a=n[`set${r[0].toUpperCase()}${r.slice(1)}`];a==null||a.call(n,t[r])}return o}_updateStyle(t,s){if(t.cursor!==s.cursor&&(this._map.getCanvas().style.cursor=t.cursor||""),t.mapStyle!==s.mapStyle){const{mapStyle:n=H,styleDiffing:o=!0}=t,r={diff:o};return"localIdeographFontFamily"in t&&(r.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(U(n),r),!0}return!1}_updateStyleComponents(t,s){const n=this._map;let o=!1;return n.isStyleLoaded()&&("light"in t&&n.setLight&&!M(t.light,s.light)&&(o=!0,n.setLight(t.light)),"fog"in t&&n.setFog&&!M(t.fog,s.fog)&&(o=!0,n.setFog(t.fog)),"terrain"in t&&n.setTerrain&&!M(t.terrain,s.terrain)&&(!t.terrain||n.getSource(t.terrain.source))&&(o=!0,n.setTerrain(t.terrain))),o}_updateHandlers(t,s){var n,o;const r=this._map;let a=!1;for(const l of je){const u=(n=t[l])!==null&&n!==void 0?n:!0,c=(o=s[l])!==null&&o!==void 0?o:!0;M(u,c)||(a=!0,u?r[l].enable(u):r[l].disable())}return a}_queryRenderedFeatures(t){const s=this._map,n=s.transform,{interactiveLayerIds:o=[]}=this.props;try{return s.transform=this._renderTransform,s.queryRenderedFeatures(t,{layers:o.filter(s.getLayer.bind(s))})}catch{return[]}finally{s.transform=n}}_updateHover(t){var s;const{props:n}=this;if(n.interactiveLayerIds&&(n.onMouseMove||n.onMouseEnter||n.onMouseLeave)){const r=t.type,a=((s=this._hoveredFeatures)===null||s===void 0?void 0:s.length)>0,l=this._queryRenderedFeatures(t.point),u=l.length>0;!u&&a&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=l,u&&!a&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=r}else this._hoveredFeatures=null}_fireEvent(t,s,n){const o=this._map,r=o.transform,a=typeof s=="string"?s:s.type;return a==="move"&&this._updateViewState(this.props,!1),a in F&&(typeof s=="object"&&(s.viewState=B(r)),this._map.isMoving())?(o.transform=this._renderTransform,t.call(o,s,n),o.transform=r,o):(t.call(o,s,n),o)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const n in this._deferredEvents)this._deferredEvents[n]&&t.fire(n);this._internalUpdate=!1;const s=this._map.transform;t.transform=this._renderTransform,this._onAfterRepaint=()=>{W(this._renderTransform,s),t.transform=s}}}L.savedMaps=[];function ke(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||Z.MapboxAccessToken}catch{}try{e=e||Z.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const Pe=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function ze(e){if(!e)return null;const t=e.map,s={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:n=>{const o=t.transform;t.transform=e.transform;const r=t.project(n);return t.transform=o,r},unproject:n=>{const o=t.transform;t.transform=e.transform;const r=t.unproject(n);return t.transform=o,r},queryTerrainElevation:(n,o)=>{const r=t.transform;t.transform=e.transform;const a=t.queryTerrainElevation(n,o);return t.transform=r,a},queryRenderedFeatures:(n,o)=>{const r=t.transform;t.transform=e.transform;const a=t.queryRenderedFeatures(n,o);return t.transform=r,a}};for(const n of Ae(t))!(n in s)&&!Pe.includes(n)&&(s[n]=t[n].bind(t));return s}function Ae(e){const t=new Set;let s=e;for(;s;){for(const n of Object.getOwnPropertyNames(s))n[0]!=="_"&&typeof e[n]=="function"&&n!=="fire"&&n!=="setEventedParent"&&t.add(n);s=Object.getPrototypeOf(s)}return Array.from(t)}const Fe=typeof document<"u"?i.useLayoutEffect:i.useEffect,Ne=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function De(e,t){for(const n of Ne)n in t&&(e[n]=t[n]);const{RTLTextPlugin:s="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;s&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(s,n=>{n&&console.error(n)},!0)}const z=i.createContext(null);function Ie(e,t,s){const n=i.useContext(we),[o,r]=i.useState(null),a=i.useRef(),{current:l}=i.useRef({mapLib:null,map:null});i.useEffect(()=>{const f=e.mapLib;let _=!0,v;return Promise.resolve(f||s).then(g=>{if(!_)return;if(!g)throw new Error("Invalid mapLib");const p="Map"in g?g:g.default;if(!p.Map)throw new Error("Invalid mapLib");if(De(p,e),!p.supported||p.supported(e))e.reuseMaps&&(v=L.reuse(e,a.current)),v||(v=new L(p.Map,e,a.current)),l.map=ze(v),l.mapLib=p,r(v),n==null||n.onMapMount(l.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(g=>{const{onError:p}=e;p?p({type:"error",target:null,originalEvent:null,error:g}):console.error(g)}),()=>{_=!1,v&&(n==null||n.onMapUnmount(e.id),e.reuseMaps?v.recycle():v.destroy())}},[]),Fe(()=>{o&&o.setProps(e)}),i.useImperativeHandle(t,()=>l.map,[o]);const u=i.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),c={height:"100%"};return i.createElement("div",{id:e.id,ref:a,style:u},o&&i.createElement(z.Provider,{value:l},i.createElement("div",{"mapboxgl-children":"",style:c},e.children)))}const Oe=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function w(e,t){if(!e||!t)return;const s=e.style;for(const n in t){const o=t[n];Number.isFinite(o)&&!Oe.test(n)?s[n]=`${o}px`:s[n]=o}}function We(e,t){const{map:s,mapLib:n}=i.useContext(z),o=i.useRef({props:e});o.current.props=e;const r=i.useMemo(()=>{let S=!1;i.Children.forEach(e.children,m=>{m&&(S=!0)});const E={...e,element:S?document.createElement("div"):null},x=new n.Marker(E);return x.setLngLat([e.longitude,e.latitude]),x.getElement().addEventListener("click",m=>{var h,y;(y=(h=o.current.props).onClick)===null||y===void 0||y.call(h,{type:"click",target:x,originalEvent:m})}),x.on("dragstart",m=>{var h,y;const b=m;b.lngLat=r.getLngLat(),(y=(h=o.current.props).onDragStart)===null||y===void 0||y.call(h,b)}),x.on("drag",m=>{var h,y;const b=m;b.lngLat=r.getLngLat(),(y=(h=o.current.props).onDrag)===null||y===void 0||y.call(h,b)}),x.on("dragend",m=>{var h,y;const b=m;b.lngLat=r.getLngLat(),(y=(h=o.current.props).onDragEnd)===null||y===void 0||y.call(h,b)}),x},[]);i.useEffect(()=>(r.addTo(s.getMap()),()=>{r.remove()}),[]);const{longitude:a,latitude:l,offset:u,style:c,draggable:f=!1,popup:_=null,rotation:v=0,rotationAlignment:g="auto",pitchAlignment:p="auto"}=e;return i.useEffect(()=>{w(r.getElement(),c)},[c]),i.useImperativeHandle(t,()=>r,[]),(r.getLngLat().lng!==a||r.getLngLat().lat!==l)&&r.setLngLat([a,l]),u&&!Ee(r.getOffset(),u)&&r.setOffset(u),r.isDraggable()!==f&&r.setDraggable(f),r.getRotation()!==v&&r.setRotation(v),r.getRotationAlignment()!==g&&r.setRotationAlignment(g),r.getPitchAlignment()!==p&&r.setPitchAlignment(p),r.getPopup()!==_&&r.setPopup(_),Q.createPortal(e.children,r.getElement())}i.memo(i.forwardRef(We));function G(e){return new Set(e?e.trim().split(/\s+/):[])}function Be(e,t){const{map:s,mapLib:n}=i.useContext(z),o=i.useMemo(()=>document.createElement("div"),[]),r=i.useRef({props:e});r.current.props=e;const a=i.useMemo(()=>{const l={...e},u=new n.Popup(l);return u.setLngLat([e.longitude,e.latitude]),u.once("open",c=>{var f,_;(_=(f=r.current.props).onOpen)===null||_===void 0||_.call(f,c)}),u},[]);if(i.useEffect(()=>{const l=u=>{var c,f;(f=(c=r.current.props).onClose)===null||f===void 0||f.call(c,u)};return a.on("close",l),a.setDOMContent(o).addTo(s.getMap()),()=>{a.off("close",l),a.isOpen()&&a.remove()}},[]),i.useEffect(()=>{w(a.getElement(),e.style)},[e.style]),i.useImperativeHandle(t,()=>a,[]),a.isOpen()&&((a.getLngLat().lng!==e.longitude||a.getLngLat().lat!==e.latitude)&&a.setLngLat([e.longitude,e.latitude]),e.offset&&!M(a.options.offset,e.offset)&&a.setOffset(e.offset),(a.options.anchor!==e.anchor||a.options.maxWidth!==e.maxWidth)&&(a.options.anchor=e.anchor,a.setMaxWidth(e.maxWidth)),a.options.className!==e.className)){const l=G(a.options.className),u=G(e.className);for(const c of l)u.has(c)||a.removeClassName(c);for(const c of u)l.has(c)||a.addClassName(c);a.options.className=e.className}return Q.createPortal(e.children,o)}const Ve=i.memo(i.forwardRef(Be));function k(e,t,s,n){const o=i.useContext(z),r=i.useMemo(()=>e(o),[]);return i.useEffect(()=>{const a=t,l=typeof t=="function"&&typeof s=="function"?t:null,u=typeof t=="function"?t:null,{map:c}=o;return c.hasControl(r)||(c.addControl(r,a==null?void 0:a.position),l&&l(o)),()=>{u&&u(o),c.hasControl(r)&&c.removeControl(r)}},[]),r}function Ue(e){const t=k(({mapLib:s})=>new s.AttributionControl(e),{position:e.position});return i.useEffect(()=>{w(t._container,e.style)},[e.style]),null}i.memo(Ue);function Ze(e){const t=k(({mapLib:s})=>new s.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return i.useEffect(()=>{w(t._controlContainer,e.style)},[e.style]),null}i.memo(Ze);function He(e,t){const s=i.useRef({props:e}),n=k(({mapLib:o})=>{const r=new o.GeolocateControl(e),a=r._setupUI;return r._setupUI=l=>{r._container.hasChildNodes()||a(l)},r.on("geolocate",l=>{var u,c;(c=(u=s.current.props).onGeolocate)===null||c===void 0||c.call(u,l)}),r.on("error",l=>{var u,c;(c=(u=s.current.props).onError)===null||c===void 0||c.call(u,l)}),r.on("outofmaxbounds",l=>{var u,c;(c=(u=s.current.props).onOutOfMaxBounds)===null||c===void 0||c.call(u,l)}),r.on("trackuserlocationstart",l=>{var u,c;(c=(u=s.current.props).onTrackUserLocationStart)===null||c===void 0||c.call(u,l)}),r.on("trackuserlocationend",l=>{var u,c;(c=(u=s.current.props).onTrackUserLocationEnd)===null||c===void 0||c.call(u,l)}),r},{position:e.position});return s.current.props=e,i.useImperativeHandle(t,()=>n,[]),i.useEffect(()=>{w(n._container,e.style)},[e.style]),null}i.memo(i.forwardRef(He));function qe(e){const t=k(({mapLib:s})=>new s.NavigationControl(e),{position:e.position});return i.useEffect(()=>{w(t._container,e.style)},[e.style]),null}const $e=i.memo(qe);function Ge(e){const t=k(({mapLib:r})=>new r.ScaleControl(e),{position:e.position}),s=i.useRef(e),n=s.current;s.current=e;const{style:o}=e;return e.maxWidth!==void 0&&e.maxWidth!==n.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==n.unit&&t.setUnit(e.unit),i.useEffect(()=>{w(t._container,o)},[o]),null}i.memo(Ge);const Ke=re(()=>import("./maplibre-gl-CNB64yil.js").then(e=>e.m),__vite__mapDeps([0,1,2])),Qe=i.forwardRef(function(t,s){return Ie(t,s,Ke)}),Je=Ve,Ye=$e;function K({lat:e,lon:t,display_name:s}){const{t:n}=P(),o=ae(),r=()=>{o(`/simulation/${t}/${e}`)},[a,l]=i.useState(!0);return i.useEffect(()=>{console.log("effect changed"),l(!0)},[e,t]),d.jsx(d.Fragment,{children:a&&d.jsxs(Je,{latitude:e,longitude:t,closeOnClick:!1,onClose:()=>l(!1),children:[d.jsx(le,{children:s}),d.jsx(j,{onClick:r,children:n("startSimulation")})]})})}function Xe({callback:e}){const[t,s]=i.useState(""),[n,o]=i.useState([]),[r,a]=i.useState(!1),[l,u]=i.useState(!1),c=i.useRef([]),f=i.useRef(),_=i.useRef(),[v,g]=i.useState(-1);window.searchFieldInput=t;const{t:p}=P();i.useEffect(()=>{const m=h=>{_.current&&!_.current.contains(h.target)&&(a(!1),g(-1))};return document.addEventListener("mousedown",m),document.addEventListener("touchstart",m),()=>{document.removeEventListener("mousedown",m),document.removeEventListener("touchstart",m)}}),i.useEffect(()=>{const h=setTimeout(async()=>{if(t.length<3&&u(!1),!l){if(t.length>2)try{const y=t.split(" ");let b=null;for(let C of y)if(C[C.length-1]===","&&(C=C.slice(0,-1)),C.length!=5&&/^\d{1,3}[a-zA-Z]?$/.test(C)){b=C;break}const D=await(await fetch(`https://photon.komoot.io/api/?q=${encodeURIComponent(t)}&bbox=5.98865807458,47.3024876979,15.0169958839,54.983104153&limit=5&lang=de&layer=street`)).json();console.log("data",D),o(D.features.map(C=>{let A=C.properties.name;return b&&(A+=" "+b),A+=", "+C.properties.postcode+" "+C.properties.city,A}))}catch(y){console.error("Error fetching suggestions:",y)}else o([]);a(n.length>0)}},200);return()=>clearTimeout(h)},[t,l]);const S=async m=>{m.preventDefault();const h=await O(t);console.warn(h),e(h)},E=m=>{s(m),O(m).then(h=>{console.warn(h),e(h)}),o([]),u(!0)},x=m=>{m.key==="ArrowDown"?(m.preventDefault(),g(h=>h<n.length-1?h+1:h)):m.key==="ArrowUp"?(m.preventDefault(),g(h=>h>-1?h-1:-1)):m.key==="Enter"&&v>-1&&(m.preventDefault(),E(n[v]))};return i.useEffect(()=>{v>-1&&c.current[v]?c.current[v].focus():v===-1&&f.current.focus()},[v]),d.jsxs("form",{ref:_,onSubmit:S,style:{display:"flex",flexDirection:"column",alignItems:"stretch",padding:"5px",position:"relative"},children:[d.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[d.jsx(_e,{ref:f,value:t,placeholder:p("searchField.placeholder"),onChange:m=>s(m.target.value),onKeyDown:x,margin:"5px",autoComplete:"street-address"}),d.jsx(j,{margin:"5px",minWidth:"150px",type:"submit",children:p("Search")})]}),r&&d.jsx(ce,{style:{paddingLeft:"0",marginTop:"0"},borderWidth:1,borderColor:"gray.200",mt:2,position:"absolute",top:"100%",left:0,right:0,zIndex:1,bg:"white",boxShadow:"md",children:n.map((m,h)=>d.jsx(ue,{ref:y=>c.current[h]=y,p:2,style:{paddingLeft:"1em"},cursor:"pointer",_hover:{backgroundColor:"gray.100"},backgroundColor:v===h?"gray.100":"white",onClick:()=>E(m),onKeyDown:x,children:m},h))})]})}function T({image:e,text:t}){return d.jsxs(J,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",children:[e&&d.jsx(be,{src:e.src,alt:e.alt,style:{maxHeight:"200px",width:"auto",margin:"20px"}}),t]})}function et(){const{isOpen:e,onOpen:t,onClose:s}=de({defaultIsOpen:!0}),[n,o]=i.useState(1),{t:r,i18n:a}=P(),l=5,u=()=>{n<l&&o(n+1)},c=()=>{n>1&&o(n-1)};return d.jsxs(fe,{isOpen:e,onClose:s,size:"xl",children:[d.jsx(me,{}),d.jsxs(he,{children:[d.jsx(ge,{children:r("WelcomeMessage.title")}),d.jsx(pe,{}),d.jsxs(ve,{children:[n===1&&d.jsx(T,{image:{src:"images/WelcomeMessage1.png",alt:"Screenshot from the Search Input, where some address is written down."},text:r("WelcomeMessage.firstPage")}),n===2&&d.jsx(T,{image:{src:"images/WelcomeMessage2.png",alt:"Screenshot from a possible Simulation Result, where the solar potential of a 3D building is shown."},text:r("WelcomeMessage.secondPage")}),n===3&&d.jsx(T,{image:{src:"images/WelcomeMessage3.png",alt:"Screenshot from a possible Simulation Result, where a PV system was created and the annual result was calculated."},text:r("WelcomeMessage.thirdPage")}),n===4&&d.jsx(T,{image:{src:"images/WelcomeMessage4.png",alt:"Screenshot from a possible Simulation Result, where a PV system was created and the annual result was calculated."},text:r("WelcomeMessage.fourthPage")}),n===5&&d.jsx(T,{text:r("WelcomeMessage.fifthPage")})]}),d.jsxs(xe,{children:[d.jsx(j,{mr:3,onClick:c,isDisabled:n===1,children:r("previous")}),n!=5&&d.jsx(j,{mr:3,onClick:u,isDisabled:n===l,children:r("next")}),n==5&&d.jsx(j,{mr:3,onClick:s,children:r("close")})]}),d.jsx(ee,{justifyContent:"center",mb:4,children:Array.from({length:l},(f,_)=>_+1).map(f=>d.jsx(X,{size:"10px",bg:n===f?"blue.500":"gray.300",m:1},f))})]})]})}function at(){const{t:e}=P(),t=[5.98,47.3,15.1,55],[s,n]=i.useState({bounds:t}),[o,r]=i.useState([]),a=Me(),l=g=>{if(g.length==0)console.error("No search results!"),a({title:e("noSearchResults.title"),description:e("noSearchResults.description"),status:"error",duration:4e3,isClosable:!0});else{g=[g[0]];const p=g.map(x=>x.lon),S=g.map(x=>x.lat),E=[Math.min(...p),Math.min(...S),Math.max(...p),Math.max(...S)];u.current.fitBounds(E,{maxZoom:17,speed:2})}r(g.map(p=>d.jsx(K,{...p},p.key)))},u=i.useRef(),c=i.useCallback(g=>{u.current=g,g!==null&&(g.getMap().dragRotate.disable(),g.getMap().touchZoomRotate.disableRotation())},[]),[f,_]=i.useState(null),v=i.useCallback(g=>{console.log(g);const{lng:p,lat:S}=g.lngLat;_([S,p])});return d.jsxs(ie,{description:e("mainDescription"),children:[d.jsx("header",{children:d.jsx("div",{className:"title",children:d.jsx(Xe,{callback:l})})}),d.jsx(et,{}),d.jsxs("div",{className:"content",children:[d.jsxs(Qe,{ref:c,...s,maxZoom:19,style:{width:"100%",height:"100%"},mapStyle:"https://sgx.geodatenzentrum.de/gdz_basemapde_vektor/styles/bm_web_col.json",onMove:g=>n(g.viewState),onClick:v,attributionControl:!1,maxBounds:[-10,35,30,65],children:[d.jsx(d.Fragment,{children:o}),f&&d.jsx(K,{lat:f[0],lon:f[1],display_name:e("map.userSelection")},"userSelectiion"),d.jsx(Ye,{position:"bottom-right",showCompass:!1})]}),d.jsx(ye,{federalState:"",frontendState:"Map"})]})]})}export{at as default};
