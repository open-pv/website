import{d as b,n as N,f as v,j as k,o as S,c as j}from"./index-CNpp8lsx.js";function w(c){const{loading:e,src:o,srcSet:s,onLoad:r,onError:t,crossOrigin:i,sizes:g,ignoreFallback:f}=c,[l,u]=b.useState("pending");b.useEffect(()=>{u(o?"loading":"pending")},[o]);const n=b.useRef(),h=b.useCallback(()=>{if(!o)return;d();const a=new Image;a.src=o,i&&(a.crossOrigin=i),s&&(a.srcset=s),g&&(a.sizes=g),e&&(a.loading=e),a.onload=m=>{d(),u("loaded"),r==null||r(m)},a.onerror=m=>{d(),u("failed"),t==null||t(m)},n.current=a},[o,i,s,g,r,t,e]),d=()=>{n.current&&(n.current.onload=null,n.current.onerror=null,n.current=null)};return N(()=>{if(!f)return l==="loading"&&h(),()=>{d()}},[l,h,f]),f?"loaded":l}const O=(c,e)=>c!=="loaded"&&e==="beforeLoadOrError"||c==="failed"&&e==="onError",I=v(function(e,o){const{htmlWidth:s,htmlHeight:r,alt:t,...i}=e;return k.jsx("img",{width:s,height:r,ref:o,alt:t,...i})});I.displayName="NativeImage";const y=v(function(e,o){const{fallbackSrc:s,fallback:r,src:t,srcSet:i,align:g,fit:f,loading:l,ignoreFallback:u,crossOrigin:n,fallbackStrategy:h="beforeLoadOrError",referrerPolicy:d,...a}=e,m=s!==void 0||r!==void 0,p=l!=null||u||!m,x=w({...e,crossOrigin:n,ignoreFallback:p}),E=O(x,h),F={ref:o,objectFit:f,objectPosition:g,...p?a:S(a,["onError","onLoad"])};return E?r||k.jsx(j.img,{as:I,className:"chakra-image__placeholder",src:s,...F}):k.jsx(j.img,{as:I,src:t,srcSet:i,crossOrigin:n,loading:l,referrerPolicy:d,className:"chakra-image",...F})});y.displayName="Image";export{y as I};
