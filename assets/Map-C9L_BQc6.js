const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/maplibre-gl-Cl6xqm7l.js","assets/index-CYa-xfdn.js","assets/index-B_C8Yw-l.css"])))=>i.map(i=>d[i]);
import{r as d,m as ie,j as g,a as le,B as ne,c as ce,b as ue,d as de,e as fe,f as j,g as me,s as ge,h as se,i as oe,M as he,k as pe,u as ye,l as z,t as ve,n as Ee,o as B,q as _e,w as Te,p as Se,v as be,x as ae,_ as Re,y as D,z as Ce,A as P,C as xe}from"./index-CYa-xfdn.js";import{T as Me,D as Le,a as we,b as Ae,c as Ie,d as Pe,e as De,f as ke,F as Oe}from"./Footer-DW84s6Nu.js";import{u as je,L as Fe,a as Ne,p as H}from"./location-DNsoR3gZ.js";import{I as Ue}from"./image-DN9vThvv.js";const re=d.forwardRef((t,n)=>{const e=je(),s=ie(e==null?void 0:e.getInputProps(),t);return g.jsx(le.input,{...s,ref:n})});re.displayName="FieldInput";const ze=d.forwardRef(function(n,e){const{size:s,...o}=n;return g.jsx(ne,{...o,ref:e,boxSize:s,css:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,flexGrow:0,...n.css}})}),Be=d.forwardRef(function(n,e){const{size:s,...o}=n;return g.jsx(ze,{size:s,ref:e,borderRadius:"9999px",...o})}),He=d.forwardRef(function(n,e){const{direction:s,align:o,justify:a,wrap:i,basis:f,grow:c,shrink:l,inline:r,...u}=n;return g.jsx(ce.div,{ref:e,...u,css:{display:r?"inline-flex":"flex",flexDirection:s,alignItems:o,justifyContent:a,flexWrap:i,flexBasis:f,flexGrow:c,flexShrink:l,...n.css}})}),{withContext:Ve,PropsProvider:Ft}=ue({key:"input"}),We=Ve(re);var Ge=de("toast").parts("group","root","title","description","actionTrigger","closeTrigger"),$e=Ge.build(),R=fe({getRegionId:t=>`toast-group:${t}`,getRegionEl:(t,n)=>R.getById(t,`toast-group:${n}`),getRootId:t=>`toast:${t.id}`,getRootEl:t=>R.getById(t,R.getRootId(t)),getTitleId:t=>`toast:${t.id}:title`,getDescriptionId:t=>`toast:${t.id}:description`,getCloseTriggerId:t=>`toast${t.id}:close`});function N(t,n){return t.filter(e=>e.state.context.placement===n)}var V={info:5e3,error:5e3,success:2e3,loading:1/0,DEFAULT:5e3};function W(t,n){return t??V[n]??V.DEFAULT}function Ze(t,n){var r;const e=t.offsets,s=typeof e=="string"?{left:e,right:e,bottom:e,top:e}:e,o=t.dir==="rtl",a=n.replace("-start",o?"-right":"-left").replace("-end",o?"-left":"-right"),i=a.includes("right"),f=a.includes("left"),c={position:"fixed",pointerEvents:t.count>0?void 0:"none",display:"flex",flexDirection:"column","--gap":`${t.gap}px`,"--first-height":`${((r=t.heights[0])==null?void 0:r.height)||0}px`,zIndex:he};let l="center";if(i&&(l="flex-end"),f&&(l="flex-start"),c.alignItems=l,a.includes("top")){const u=s.top;c.top=`max(env(safe-area-inset-top, 0px), ${u})`}if(a.includes("bottom")){const u=s.bottom;c.bottom=`max(env(safe-area-inset-bottom, 0px), ${u})`}if(!a.includes("left")){const u=s.right;c.insetInlineEnd=`calc(env(safe-area-inset-right, 0px) + ${u})`}if(!a.includes("right")){const u=s.left;c.insetInlineStart=`calc(env(safe-area-inset-left, 0px) + ${u})`}return c}function qe(t,n,e){function s(){return pe(t)?t.getState():t}function o(r){return N(s().context.toasts,r)}function a(r){const u=s().context.toasts;return u.length?!!u.find(m=>m.id==r):!1}function i(r){const u=`toast:${ye()}`,m=r.id?r.id:u;return a(m)||n({type:"ADD_TOAST",toast:{...r,id:m}}),m}function f(r,u){return a(r)&&n({type:"UPDATE_TOAST",id:r,toast:u}),r}function c(r){const{id:u}=r;return(u?a(u):!1)&&u!=null?f(u,r):i(r)}function l(r){r==null?n("DISMISS_ALL"):a(r)&&n({type:"DISMISS_TOAST",id:r})}return{getCount(){return s().context.count},getPlacements(){const u=s().context.toasts.map(m=>m.state.context.placement);return Array.from(new Set(u))},getToastsByPlacement:o,isVisible:a,create:i,update:f,upsert:c,dismiss:l,remove(r){r==null?n("REMOVE_ALL"):a(r)&&n({type:"REMOVE_TOAST",id:r})},dismissByPlacement(r){o(r).forEach(m=>l(m.id))},loading(r){return c({...r,type:"loading"})},success(r){return c({...r,type:"success"})},error(r){return c({...r,type:"error"})},promise(r,u,m={}){const h=c({...m,...u.loading,type:"loading"});return j(r).then(p=>{const T=j(u.success,p);c({...m,...T,id:h,type:"success"})}).catch(p=>{const T=j(u.error,p);c({...m,...T,id:h,type:"error"})}).finally(()=>{var p;(p=u.finally)==null||p.call(u)}),h},pause(r){r==null?n("PAUSE_ALL"):a(r)&&n({type:"PAUSE_TOAST",id:r})},resume(r){r==null?n("RESUME_ALL"):a(r)&&n({type:"RESUME_TOAST",id:r})},getGroupProps(r){const{placement:u,label:m="Notifications"}=r,h=s(),p=h.context.hotkey.join("+").replace(/Key/g,"").replace(/Digit/g,""),[T,x="center"]=u.split("-");return e.element({...$e.group.attrs,dir:h.context.dir,tabIndex:-1,"aria-label":`${u} ${m} ${p}`,id:R.getRegionId(u),"data-placement":u,"data-side":T,"data-align":x,"aria-live":"polite",role:"region",style:Ze(h.context,u),onMouseMove(){n({type:"REGION.POINTER_ENTER",placement:u})},onMouseLeave(){n({type:"REGION.POINTER_LEAVE",placement:u})},onFocus(_){n({type:"REGION.FOCUS",target:_.relatedTarget})},onBlur(_){h.context.isFocusWithin&&!me(_.currentTarget,_.relatedTarget)&&n({type:"REGION.BLUR"})}})},subscribe(r){const u=s();return ge(u.context.toasts,()=>{const h=o(u.context.placement).map(p=>p.getState().context);r(h)})}}}var{not:Ke,and:Ye,or:Qe}=Se;function Xe(t){const{type:n="info",duration:e,id:s="1",placement:o="bottom",removeDelay:a=200,...i}=t,f=se(i),c=W(e,n);return oe({id:s,context:{id:s,type:n,remaining:c,duration:c,removeDelay:a,createdAt:Date.now(),placement:o,...f,height:0,offset:0,frontmost:!1,mounted:!1,index:-1,zIndex:0},initial:n==="loading"?"visible:persist":"visible",on:{UPDATE:[{guard:Ye("hasTypeChanged","isChangingToLoading"),target:"visible:persist",actions:["setContext"]},{guard:Qe("hasDurationChanged","hasTypeChanged"),target:"visible:updating",actions:["setContext"]},{actions:["setContext"]}],MEASURE:{actions:["measureHeight"]}},entry:["invokeOnVisible"],activities:["trackHeight"],states:{"visible:updating":{tags:["visible","updating"],after:{0:"visible"}},"visible:persist":{tags:["visible","paused"],on:{RESUME:{guard:Ke("isLoadingType"),target:"visible",actions:["setCreatedAt"]},DISMISS:"dismissing"}},visible:{tags:["visible"],after:{VISIBLE_DURATION:"dismissing"},on:{DISMISS:"dismissing",PAUSE:{target:"visible:persist",actions:"setRemainingDuration"}}},dismissing:{entry:"invokeOnDismiss",after:{REMOVE_DELAY:{target:"unmounted",actions:"notifyParentToRemove"}}},unmounted:{entry:"invokeOnUnmount",type:"final"}}},{activities:{trackHeight(l,r,{self:u}){let m;return B(()=>{const h=R.getRootEl(l);if(!h)return;l.mounted=!0;const p=_e(h,"[data-ghost]");Te(p.length!==2,"[toast] No ghost element found in toast. Render the `ghostBefore` and `ghostAfter` elements");const T=()=>{const v=h.style.height;h.style.height="auto";const y=h.getBoundingClientRect().height;h.style.height=v,l.height=y,u.sendParent({type:"UPDATE_HEIGHT",id:u.id,height:y,placement:l.placement})};T();const x=R.getWin(l),_=new x.MutationObserver(T);_.observe(h,{childList:!0,subtree:!0,characterData:!0}),m=()=>_.disconnect()}),()=>m==null?void 0:m()}},guards:{isChangingToLoading:(l,r)=>{var u;return((u=r.toast)==null?void 0:u.type)==="loading"},isLoadingType:l=>l.type==="loading",hasTypeChanged:(l,r)=>{var u;return((u=r.toast)==null?void 0:u.type)!=null&&r.toast.type!==l.type},hasDurationChanged:(l,r)=>{var u;return((u=r.toast)==null?void 0:u.duration)!=null&&r.toast.duration!==l.duration}},delays:{VISIBLE_DURATION:l=>l.remaining,REMOVE_DELAY:l=>l.removeDelay},actions:{measureHeight(l,r,{self:u}){B(()=>{const m=R.getRootEl(l);if(!m)return;l.mounted=!0;const h=m.style.height;m.style.height="auto";const p=m.getBoundingClientRect().height;m.style.height=h,l.height=p,u.sendParent({type:"UPDATE_HEIGHT",id:u.id,height:p,placement:l.placement})})},setRemainingDuration(l){l.remaining-=Date.now()-l.createdAt},setCreatedAt(l){l.createdAt=Date.now()},notifyParentToRemove(l,r,{self:u}){u.sendParent({type:"REMOVE_TOAST",id:u.id})},invokeOnDismiss(l){var r;(r=l.onStatusChange)==null||r.call(l,{status:"dismissing"})},invokeOnUnmount(l){var r;(r=l.onStatusChange)==null||r.call(l,{status:"unmounted"})},invokeOnVisible(l){var r;(r=l.onStatusChange)==null||r.call(l,{status:"visible"})},setContext(l,r){var p,T;const u=(p=r.toast)==null?void 0:p.duration,m=((T=r.toast)==null?void 0:T.type)??l.type,h=W(u,m);Object.assign(l,{...r.toast,duration:h,remaining:h})}}})}function Je(t){const n=se(t);return oe({id:"toaster",initial:n.overlap?"overlap":"stack",context:{dir:"ltr",max:Number.MAX_SAFE_INTEGER,gap:16,pauseOnPageIdle:!1,hotkey:["altKey","KeyT"],offsets:"1rem",placement:"bottom",removeDelay:200,...n,toasts:[],lastFocusedEl:null,isFocusWithin:!1,heights:[]},computed:{count:e=>e.toasts.length},activities:["trackDocumentVisibility","trackHotKeyPress"],watch:{toasts:["collapsedIfEmpty","setDismissableBranch"]},exit:["removeToasts","clearDismissableBranch","clearLastFocusedEl"],on:{PAUSE_TOAST:{actions:["pauseToast"]},PAUSE_ALL:{actions:["pauseToasts"]},RESUME_TOAST:{actions:["resumeToast"]},RESUME_ALL:{actions:["resumeToasts"]},ADD_TOAST:{guard:"isWithinRange",actions:["createToast","syncToastIndex"]},UPDATE_TOAST:{actions:["updateToast"]},DISMISS_TOAST:{actions:["dismissToast"]},DISMISS_ALL:{actions:["dismissToasts"]},REMOVE_TOAST:{actions:["removeToast","syncToastIndex","syncToastOffset"]},REMOVE_ALL:{actions:["removeToasts"]},UPDATE_HEIGHT:{actions:["syncHeights","syncToastOffset"]},"DOC.HOTKEY":{actions:["focusRegionEl"]},"REGION.BLUR":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts","restoreLastFocusedEl"]},{actions:["resumeToasts","restoreLastFocusedEl"]}]},states:{stack:{entry:["expandToasts"],on:{"REGION.POINTER_LEAVE":[{guard:"isOverlapping",target:"overlap",actions:["resumeToasts"]},{actions:["resumeToasts"]}],"REGION.OVERLAP":{target:"overlap"},"REGION.FOCUS":{actions:["setLastFocusedEl","pauseToasts"]},"REGION.POINTER_ENTER":{actions:["pauseToasts"]}}},overlap:{entry:["collapseToasts"],on:{"REGION.STACK":{target:"stack"},"REGION.POINTER_ENTER":{target:"stack",actions:["pauseToasts"]},"REGION.FOCUS":{target:"stack",actions:["setLastFocusedEl","pauseToasts"]}}}}},{guards:{isWithinRange:e=>e.toasts.length<e.max,isOverlapping:e=>!!e.overlap},activities:{trackHotKeyPress(e,s,{send:o}){return z(document,"keydown",i=>{e.hotkey.every(c=>i[c]||i.code===c)&&o({type:"DOC.HOTKEY"})},{capture:!0})},trackDocumentVisibility(e,s,{send:o}){if(!e.pauseOnPageIdle)return;const a=R.getDoc(e);return z(a,"visibilitychange",()=>{o(a.visibilityState==="hidden"?"PAUSE_ALL":"RESUME_ALL")})}},actions:{setDismissableBranch(e){var i;const o=N(e.toasts,e.placement).length>0;if(!o){(i=e._cleanup)==null||i.call(e);return}if(o&&e._cleanup)return;const a=()=>R.getRegionEl(e,e.placement);e._cleanup=ve(a,{defer:!0})},clearDismissableBranch(e){var s;(s=e._cleanup)==null||s.call(e)},focusRegionEl(e){queueMicrotask(()=>{var s;(s=R.getRegionEl(e,e.placement))==null||s.focus()})},expandToasts(e){I(e,s=>{s.state.context.stacked=!0})},collapseToasts(e){I(e,s=>{s.state.context.stacked=!1})},collapsedIfEmpty(e,s,{send:o}){!e.overlap||e.toasts.length>1||o("REGION.OVERLAP")},pauseToast(e,s,{self:o}){o.sendChild("PAUSE",s.id)},pauseToasts(e){e.toasts.forEach(s=>s.send("PAUSE"))},resumeToast(e,s,{self:o}){o.sendChild("RESUME",s.id)},resumeToasts(e){e.toasts.forEach(s=>s.send("RESUME"))},measureToasts(e){e.toasts.forEach(s=>s.send("MEASURE"))},createToast(e,s,{self:o,getState:a}){const i={placement:e.placement,duration:e.duration,removeDelay:e.removeDelay,...s.toast,dir:e.dir,getRootNode:e.getRootNode,stacked:a().matches("stack")},f=Xe(i),c=o.spawn(f);e.toasts=[c,...e.toasts]},updateToast(e,s,{self:o}){o.sendChild({type:"UPDATE",toast:s.toast},s.id)},dismissToast(e,s,{self:o}){o.sendChild("DISMISS",s.id)},dismissToasts(e){e.toasts.forEach(s=>s.send("DISMISS"))},removeToast(e,s,{self:o}){o.stopChild(s.id),e.toasts=e.toasts.filter(a=>a.id!==s.id),e.heights=e.heights.filter(a=>a.id!==s.id)},removeToasts(e,s,{self:o}){e.toasts.forEach(a=>o.stopChild(a.id)),e.toasts=[],e.heights=[]},syncHeights(e,s){const o=e.heights.find(a=>a.id===s.id);if(o)o.height=s.height,o.placement=s.placement;else{const a={id:s.id,height:s.height,placement:s.placement};e.heights=[a,...e.heights]}},syncToastIndex(e){I(e,(s,o,a)=>{s.state.context.index=o,s.state.context.frontmost=o===0,s.state.context.zIndex=a.length-o})},syncToastOffset(e,s){const o=s.placement??e.placement;I({...e,placement:o},a=>{const i=Math.max(e.heights.findIndex(c=>c.id===a.id),0),f=e.heights.reduce((c,l,r)=>r>=i?c:c+l.height,0);a.state.context.offset=i*e.gap+f})},setLastFocusedEl(e,s){e.isFocusWithin||!s.target||(e.isFocusWithin=!0,e.lastFocusedEl=Ee(s.target))},restoreLastFocusedEl(e){e.isFocusWithin=!1,e.lastFocusedEl&&(e.lastFocusedEl.focus({preventScroll:!0}),e.lastFocusedEl=null)},clearLastFocusedEl(e){e.lastFocusedEl&&(e.lastFocusedEl.focus({preventScroll:!0}),e.lastFocusedEl=null,e.isFocusWithin=!1)}}})}function I(t,n){N(t.toasts,t.placement).forEach(n)}var G={connect:qe,machine:Je};const et=t=>{const n=G.machine({id:"1",...t});return{...G.connect(n,n.send,be),machine:n}},tt=et({placement:"bottom-end",pauseOnPageIdle:!0}),nt=d.createContext(null);function st(t,n){const e=Array.isArray(t)?t[0]:t?t.x:0,s=Array.isArray(t)?t[1]:t?t.y:0,o=Array.isArray(n)?n[0]:n?n.x:0,a=Array.isArray(n)?n[1]:n?n.y:0;return e===o&&s===a}function C(t,n){if(t===n)return!0;if(!t||!n)return!1;if(Array.isArray(t)){if(!Array.isArray(n)||t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(!C(t[e],n[e]))return!1;return!0}else if(Array.isArray(n))return!1;if(typeof t=="object"&&typeof n=="object"){const e=Object.keys(t),s=Object.keys(n);if(e.length!==s.length)return!1;for(const o of e)if(!n.hasOwnProperty(o)||!C(t[o],n[o]))return!1;return!0}return!1}function ot(t){const n=t.clone();return n.pixelsToGLUnits=t.pixelsToGLUnits,n}function $(t,n){if(!t.getProjection)return;const e=t.getProjection(),s=n.getProjection();C(e,s)||n.setProjection(e)}function Z(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function q(t,n){const e=n.viewState||n;let s=!1;if("longitude"in e&&"latitude"in e){const o=t.center;t.center=new o.constructor(e.longitude,e.latitude),s=s||o!==t.center}if("zoom"in e){const o=t.zoom;t.zoom=e.zoom,s=s||o!==t.zoom}if("bearing"in e){const o=t.bearing;t.bearing=e.bearing,s=s||o!==t.bearing}if("pitch"in e){const o=t.pitch;t.pitch=e.pitch,s=s||o!==t.pitch}return e.padding&&!t.isPaddingEqual(e.padding)&&(s=!0,t.padding=e.padding),s}const at=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function K(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const n={};for(const s of t.layers)n[s.id]=s;const e=t.layers.map(s=>{let o=null;"interactive"in s&&(o=Object.assign({},s),delete o.interactive);const a=n[s.ref];if(a){o=o||Object.assign({},s),delete o.ref;for(const i of at)i in a&&(o[i]=a[i])}return o||s});return{...t,layers:e}}var Y={};const Q={version:8,sources:{},layers:[]},X={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},F={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},J={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},rt=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],it=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class L{constructor(n,e,s){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=o=>{const a=this.props[J[o.type]];a?a(o):o.type==="error"&&console.error(o.error)},this._onPointerEvent=o=>{(o.type==="mousemove"||o.type==="mouseout")&&this._updateHover(o);const a=this.props[X[o.type]];a&&(this.props.interactiveLayerIds&&o.type!=="mouseover"&&o.type!=="mouseout"&&(o.features=this._hoveredFeatures||this._queryRenderedFeatures(o.point)),a(o),delete o.features)},this._onCameraEvent=o=>{if(!this._internalUpdate){const a=this.props[F[o.type]];a&&a(o)}o.type in this._deferredEvents&&(this._deferredEvents[o.type]=!1)},this._MapClass=n,this.props=e,this._initialize(s)}get map(){return this._map}get transform(){return this._renderTransform}setProps(n){const e=this.props;this.props=n;const s=this._updateSettings(n,e);s&&this._createShadowTransform(this._map);const o=this._updateSize(n),a=this._updateViewState(n,!0);this._updateStyle(n,e),this._updateStyleComponents(n,e),this._updateHandlers(n,e),(s||o||a&&!this._map.isMoving())&&this.redraw()}static reuse(n,e){const s=L.savedMaps.pop();if(!s)return null;const o=s.map,a=o.getContainer();for(e.className=a.className;a.childNodes.length>0;)e.appendChild(a.childNodes[0]);o._container=e;const i=o._resizeObserver;i&&(i.disconnect(),i.observe(e)),s.setProps({...n,styleDiffing:!1}),o.resize();const{initialViewState:f}=n;return f&&(f.bounds?o.fitBounds(f.bounds,{...f.fitBoundsOptions,duration:0}):s._updateViewState(f,!1)),o.isStyleLoaded()?o.fire("load"):o.once("styledata",()=>o.fire("load")),o._update(),s}_initialize(n){const{props:e}=this,{mapStyle:s=Q}=e,o={...e,...e.initialViewState,accessToken:e.mapboxAccessToken||lt()||null,container:n,style:K(s)},a=o.initialViewState||o.viewState||o;if(Object.assign(o,{center:[a.longitude||0,a.latitude||0],zoom:a.zoom||0,pitch:a.pitch||0,bearing:a.bearing||0}),e.gl){const r=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=r,e.gl)}const i=new this._MapClass(o);a.padding&&i.setPadding(a.padding),e.cursor&&(i.getCanvas().style.cursor=e.cursor),this._createShadowTransform(i);const f=i._render;i._render=r=>{this._inRender=!0,f.call(i,r),this._inRender=!1};const c=i._renderTaskQueue.run;i._renderTaskQueue.run=r=>{c.call(i._renderTaskQueue,r),this._onBeforeRepaint()},i.on("render",()=>this._onAfterRepaint());const l=i.fire;i.fire=this._fireEvent.bind(this,l),i.on("resize",()=>{this._renderTransform.resize(i.transform.width,i.transform.height)}),i.on("styledata",()=>{this._updateStyleComponents(this.props,{}),$(i.transform,this._renderTransform)}),i.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const r in X)i.on(r,this._onPointerEvent);for(const r in F)i.on(r,this._onCameraEvent);for(const r in J)i.on(r,this._onEvent);this._map=i}recycle(){const e=this.map.getContainer().querySelector("[mapboxgl-children]");e==null||e.remove(),L.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const n=this._map;!this._inRender&&n.style&&(n._frame&&(n._frame.cancel(),n._frame=null),n._render())}_createShadowTransform(n){const e=ot(n.transform);n.painter.transform=e,this._renderTransform=e}_updateSize(n){const{viewState:e}=n;if(e){const s=this._map;if(e.width!==s.transform.width||e.height!==s.transform.height)return s.resize(),!0}return!1}_updateViewState(n,e){if(this._internalUpdate)return!1;const s=this._map,o=this._renderTransform,{zoom:a,pitch:i,bearing:f}=o,c=s.isMoving();c&&(o.cameraElevationReference="sea");const l=q(o,{...Z(s.transform),...n});if(c&&(o.cameraElevationReference="ground"),l&&e){const r=this._deferredEvents;r.move=!0,r.zoom||(r.zoom=a!==o.zoom),r.rotate||(r.rotate=f!==o.bearing),r.pitch||(r.pitch=i!==o.pitch)}return c||q(s.transform,n),l}_updateSettings(n,e){const s=this._map;let o=!1;for(const a of rt)if(a in n&&!C(n[a],e[a])){o=!0;const i=s[`set${a[0].toUpperCase()}${a.slice(1)}`];i==null||i.call(s,n[a])}return o}_updateStyle(n,e){if(n.cursor!==e.cursor&&(this._map.getCanvas().style.cursor=n.cursor||""),n.mapStyle!==e.mapStyle){const{mapStyle:s=Q,styleDiffing:o=!0}=n,a={diff:o};return"localIdeographFontFamily"in n&&(a.localIdeographFontFamily=n.localIdeographFontFamily),this._map.setStyle(K(s),a),!0}return!1}_updateStyleComponents(n,e){const s=this._map;let o=!1;return s.isStyleLoaded()&&("light"in n&&s.setLight&&!C(n.light,e.light)&&(o=!0,s.setLight(n.light)),"fog"in n&&s.setFog&&!C(n.fog,e.fog)&&(o=!0,s.setFog(n.fog)),"terrain"in n&&s.setTerrain&&!C(n.terrain,e.terrain)&&(!n.terrain||s.getSource(n.terrain.source))&&(o=!0,s.setTerrain(n.terrain))),o}_updateHandlers(n,e){var s,o;const a=this._map;let i=!1;for(const f of it){const c=(s=n[f])!==null&&s!==void 0?s:!0,l=(o=e[f])!==null&&o!==void 0?o:!0;C(c,l)||(i=!0,c?a[f].enable(c):a[f].disable())}return i}_queryRenderedFeatures(n){const e=this._map,s=e.transform,{interactiveLayerIds:o=[]}=this.props;try{return e.transform=this._renderTransform,e.queryRenderedFeatures(n,{layers:o.filter(e.getLayer.bind(e))})}catch{return[]}finally{e.transform=s}}_updateHover(n){var e;const{props:s}=this;if(s.interactiveLayerIds&&(s.onMouseMove||s.onMouseEnter||s.onMouseLeave)){const a=n.type,i=((e=this._hoveredFeatures)===null||e===void 0?void 0:e.length)>0,f=this._queryRenderedFeatures(n.point),c=f.length>0;!c&&i&&(n.type="mouseleave",this._onPointerEvent(n)),this._hoveredFeatures=f,c&&!i&&(n.type="mouseenter",this._onPointerEvent(n)),n.type=a}else this._hoveredFeatures=null}_fireEvent(n,e,s){const o=this._map,a=o.transform,i=typeof e=="string"?e:e.type;return i==="move"&&this._updateViewState(this.props,!1),i in F&&(typeof e=="object"&&(e.viewState=Z(a)),this._map.isMoving())?(o.transform=this._renderTransform,n.call(o,e,s),o.transform=a,o):(n.call(o,e,s),o)}_onBeforeRepaint(){const n=this._map;this._internalUpdate=!0;for(const s in this._deferredEvents)this._deferredEvents[s]&&n.fire(s);this._internalUpdate=!1;const e=this._map.transform;n.transform=this._renderTransform,this._onAfterRepaint=()=>{$(this._renderTransform,e),n.transform=e}}}L.savedMaps=[];function lt(){let t=null;if(typeof location<"u"){const n=/access_token=([^&\/]*)/.exec(location.search);t=n&&n[1]}try{t=t||Y.MapboxAccessToken}catch{}try{t=t||Y.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const ct=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function ut(t){if(!t)return null;const n=t.map,e={getMap:()=>n,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:s=>{const o=n.transform;n.transform=t.transform;const a=n.project(s);return n.transform=o,a},unproject:s=>{const o=n.transform;n.transform=t.transform;const a=n.unproject(s);return n.transform=o,a},queryTerrainElevation:(s,o)=>{const a=n.transform;n.transform=t.transform;const i=n.queryTerrainElevation(s,o);return n.transform=a,i},queryRenderedFeatures:(s,o)=>{const a=n.transform;n.transform=t.transform;const i=n.queryRenderedFeatures(s,o);return n.transform=a,i}};for(const s of dt(n))!(s in e)&&!ct.includes(s)&&(e[s]=n[s].bind(n));return e}function dt(t){const n=new Set;let e=t;for(;e;){for(const s of Object.getOwnPropertyNames(e))s[0]!=="_"&&typeof t[s]=="function"&&s!=="fire"&&s!=="setEventedParent"&&n.add(s);e=Object.getPrototypeOf(e)}return Array.from(n)}const ft=typeof document<"u"?d.useLayoutEffect:d.useEffect,mt=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function gt(t,n){for(const s of mt)s in n&&(t[s]=n[s]);const{RTLTextPlugin:e="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=n;e&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(e,s=>{s&&console.error(s)},!0)}const k=d.createContext(null);function ht(t,n,e){const s=d.useContext(nt),[o,a]=d.useState(null),i=d.useRef(),{current:f}=d.useRef({mapLib:null,map:null});d.useEffect(()=>{const r=t.mapLib;let u=!0,m;return Promise.resolve(r||e).then(h=>{if(!u)return;if(!h)throw new Error("Invalid mapLib");const p="Map"in h?h:h.default;if(!p.Map)throw new Error("Invalid mapLib");if(gt(p,t),!p.supported||p.supported(t))t.reuseMaps&&(m=L.reuse(t,i.current)),m||(m=new L(p.Map,t,i.current)),f.map=ut(m),f.mapLib=p,a(m),s==null||s.onMapMount(f.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(h=>{const{onError:p}=t;p?p({type:"error",target:null,originalEvent:null,error:h}):console.error(h)}),()=>{u=!1,m&&(s==null||s.onMapUnmount(t.id),t.reuseMaps?m.recycle():m.destroy())}},[]),ft(()=>{o&&o.setProps(t)}),d.useImperativeHandle(n,()=>f.map,[o]);const c=d.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),l={height:"100%"};return d.createElement("div",{id:t.id,ref:i,style:c},o&&d.createElement(k.Provider,{value:f},d.createElement("div",{"mapboxgl-children":"",style:l},t.children)))}const pt=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function M(t,n){if(!t||!n)return;const e=t.style;for(const s in n){const o=n[s];Number.isFinite(o)&&!pt.test(s)?e[s]=`${o}px`:e[s]=o}}function yt(t,n){const{map:e,mapLib:s}=d.useContext(k),o=d.useRef({props:t});o.current.props=t;const a=d.useMemo(()=>{let T=!1;d.Children.forEach(t.children,v=>{v&&(T=!0)});const x={...t,element:T?document.createElement("div"):null},_=new s.Marker(x);return _.setLngLat([t.longitude,t.latitude]),_.getElement().addEventListener("click",v=>{var y,E;(E=(y=o.current.props).onClick)===null||E===void 0||E.call(y,{type:"click",target:_,originalEvent:v})}),_.on("dragstart",v=>{var y,E;const S=v;S.lngLat=a.getLngLat(),(E=(y=o.current.props).onDragStart)===null||E===void 0||E.call(y,S)}),_.on("drag",v=>{var y,E;const S=v;S.lngLat=a.getLngLat(),(E=(y=o.current.props).onDrag)===null||E===void 0||E.call(y,S)}),_.on("dragend",v=>{var y,E;const S=v;S.lngLat=a.getLngLat(),(E=(y=o.current.props).onDragEnd)===null||E===void 0||E.call(y,S)}),_},[]);d.useEffect(()=>(a.addTo(e.getMap()),()=>{a.remove()}),[]);const{longitude:i,latitude:f,offset:c,style:l,draggable:r=!1,popup:u=null,rotation:m=0,rotationAlignment:h="auto",pitchAlignment:p="auto"}=t;return d.useEffect(()=>{M(a.getElement(),l)},[l]),d.useImperativeHandle(n,()=>a,[]),(a.getLngLat().lng!==i||a.getLngLat().lat!==f)&&a.setLngLat([i,f]),c&&!st(a.getOffset(),c)&&a.setOffset(c),a.isDraggable()!==r&&a.setDraggable(r),a.getRotation()!==m&&a.setRotation(m),a.getRotationAlignment()!==h&&a.setRotationAlignment(h),a.getPitchAlignment()!==p&&a.setPitchAlignment(p),a.getPopup()!==u&&a.setPopup(u),ae.createPortal(t.children,a.getElement())}d.memo(d.forwardRef(yt));function ee(t){return new Set(t?t.trim().split(/\s+/):[])}function vt(t,n){const{map:e,mapLib:s}=d.useContext(k),o=d.useMemo(()=>document.createElement("div"),[]),a=d.useRef({props:t});a.current.props=t;const i=d.useMemo(()=>{const f={...t},c=new s.Popup(f);return c.setLngLat([t.longitude,t.latitude]),c.once("open",l=>{var r,u;(u=(r=a.current.props).onOpen)===null||u===void 0||u.call(r,l)}),c},[]);if(d.useEffect(()=>{const f=c=>{var l,r;(r=(l=a.current.props).onClose)===null||r===void 0||r.call(l,c)};return i.on("close",f),i.setDOMContent(o).addTo(e.getMap()),()=>{i.off("close",f),i.isOpen()&&i.remove()}},[]),d.useEffect(()=>{M(i.getElement(),t.style)},[t.style]),d.useImperativeHandle(n,()=>i,[]),i.isOpen()&&((i.getLngLat().lng!==t.longitude||i.getLngLat().lat!==t.latitude)&&i.setLngLat([t.longitude,t.latitude]),t.offset&&!C(i.options.offset,t.offset)&&i.setOffset(t.offset),(i.options.anchor!==t.anchor||i.options.maxWidth!==t.maxWidth)&&(i.options.anchor=t.anchor,i.setMaxWidth(t.maxWidth)),i.options.className!==t.className)){const f=ee(i.options.className),c=ee(t.className);for(const l of f)c.has(l)||i.removeClassName(l);for(const l of c)f.has(l)||i.addClassName(l);i.options.className=t.className}return ae.createPortal(t.children,o)}const Et=d.memo(d.forwardRef(vt));function A(t,n,e,s){const o=d.useContext(k),a=d.useMemo(()=>t(o),[]);return d.useEffect(()=>{const i=n,f=typeof n=="function"?n:null,{map:c}=o;return c.hasControl(a)||c.addControl(a,i==null?void 0:i.position),()=>{f&&f(o),c.hasControl(a)&&c.removeControl(a)}},[]),a}function _t(t){const n=A(({mapLib:e})=>new e.AttributionControl(t),{position:t.position});return d.useEffect(()=>{M(n._container,t.style)},[t.style]),null}d.memo(_t);function Tt(t){const n=A(({mapLib:e})=>new e.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return d.useEffect(()=>{M(n._controlContainer,t.style)},[t.style]),null}d.memo(Tt);function St(t,n){const e=d.useRef({props:t}),s=A(({mapLib:o})=>{const a=new o.GeolocateControl(t),i=a._setupUI;return a._setupUI=f=>{a._container.hasChildNodes()||i(f)},a.on("geolocate",f=>{var c,l;(l=(c=e.current.props).onGeolocate)===null||l===void 0||l.call(c,f)}),a.on("error",f=>{var c,l;(l=(c=e.current.props).onError)===null||l===void 0||l.call(c,f)}),a.on("outofmaxbounds",f=>{var c,l;(l=(c=e.current.props).onOutOfMaxBounds)===null||l===void 0||l.call(c,f)}),a.on("trackuserlocationstart",f=>{var c,l;(l=(c=e.current.props).onTrackUserLocationStart)===null||l===void 0||l.call(c,f)}),a.on("trackuserlocationend",f=>{var c,l;(l=(c=e.current.props).onTrackUserLocationEnd)===null||l===void 0||l.call(c,f)}),a},{position:t.position});return e.current.props=t,d.useImperativeHandle(n,()=>s,[]),d.useEffect(()=>{M(s._container,t.style)},[t.style]),null}d.memo(d.forwardRef(St));function bt(t){const n=A(({mapLib:e})=>new e.NavigationControl(t),{position:t.position});return d.useEffect(()=>{M(n._container,t.style)},[t.style]),null}const Rt=d.memo(bt);function Ct(t){const n=A(({mapLib:a})=>new a.ScaleControl(t),{position:t.position}),e=d.useRef(t),s=e.current;e.current=t;const{style:o}=t;return t.maxWidth!==void 0&&t.maxWidth!==s.maxWidth&&(n.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==s.unit&&n.setUnit(t.unit),d.useEffect(()=>{M(n._container,o)},[o]),null}d.memo(Ct);const xt=Re(()=>import("./maplibre-gl-Cl6xqm7l.js").then(t=>t.m),__vite__mapDeps([0,1,2])),Mt=d.forwardRef(function(n,e){return ht(n,e,xt)}),Lt=Et,wt=Rt;function te({lat:t,lon:n,display_name:e}){const{t:s}=D(),o=Ce(),a=()=>{o(`/simulation/${n}/${t}`)},[i,f]=d.useState(!0);return d.useEffect(()=>{console.log("effect changed"),f(!0)},[t,n]),g.jsx(g.Fragment,{children:i&&g.jsxs(Lt,{latitude:t,longitude:n,closeOnClick:!1,onClose:()=>f(!1),children:[g.jsx(Me,{margin:"10px",children:e}),g.jsx(P,{variant:"subtle",onClick:a,children:s("startSimulation")})]})})}function At({callback:t}){const[n,e]=d.useState(""),[s,o]=d.useState([]),[a,i]=d.useState(!1),[f,c]=d.useState(!1),l=d.useRef([]),r=d.useRef(),u=d.useRef(),[m,h]=d.useState(-1);window.searchFieldInput=n;const{t:p}=D();d.useEffect(()=>{const v=y=>{u.current&&!u.current.contains(y.target)&&(i(!1),h(-1))};return document.addEventListener("mousedown",v),document.addEventListener("touchstart",v),()=>{document.removeEventListener("mousedown",v),document.removeEventListener("touchstart",v)}}),d.useEffect(()=>{const y=setTimeout(async()=>{if(n.length<3&&c(!1),!f){if(n.length>2)try{const E=n.split(" ");let S=null;for(let b of E)if(b[b.length-1]===","&&(b=b.slice(0,-1)),b.length!=5&&/^\d{1,3}[a-zA-Z]?$/.test(b)){S=b;break}const U=await(await fetch(`https://photon.komoot.io/api/?q=${encodeURIComponent(n)}&bbox=5.98865807458,47.3024876979,15.0169958839,54.983104153&limit=5&lang=de&layer=street`)).json();console.log("data",U),o(U.features.map(b=>{let O=b.properties.name;return S&&(O+=" "+S),O+=", "+b.properties.postcode+" "+b.properties.city,O}))}catch(E){console.error("Error fetching suggestions:",E)}else o([]);i(s.length>0)}},200);return()=>clearTimeout(y)},[n,f]);const T=async v=>{v.preventDefault();const y=await H(n);console.warn(y),t(y)},x=v=>{e(v),H(v).then(y=>{console.warn(y),t(y)}),o([]),c(!0)},_=v=>{v.key==="ArrowDown"?(v.preventDefault(),h(y=>y<s.length-1?y+1:y)):v.key==="ArrowUp"?(v.preventDefault(),h(y=>y>-1?y-1:-1)):v.key==="Enter"&&m>-1&&(v.preventDefault(),x(s[m]))};return d.useEffect(()=>{m>-1&&l.current[m]?l.current[m].focus():m===-1&&r.current.focus()},[m]),g.jsxs("form",{ref:u,onSubmit:T,style:{display:"flex",flexDirection:"column",alignItems:"stretch",padding:"5px",position:"relative"},children:[g.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[g.jsx(We,{ref:r,value:n,placeholder:p("searchField.placeholder"),onChange:v=>e(v.target.value),onKeyDown:_,margin:"5px",autoComplete:"street-address"}),g.jsx(P,{margin:"5px",minWidth:"150px",type:"submit",variant:"subtle",children:p("Search")})]}),a&&g.jsx(Fe,{as:"ul",style:{paddingLeft:"0",marginTop:"0"},variant:"plain",borderWidth:1,borderColor:"gray.200",mt:2,position:"absolute",top:"100%",left:0,right:0,zIndex:1,bg:"white",boxShadow:"md",children:s.map((v,y)=>g.jsx(Ne,{ref:E=>l.current[y]=E,p:2,style:{paddingLeft:"1em"},cursor:"pointer",_hover:{backgroundColor:"gray.100"},backgroundColor:m===y?"gray.100":"white",onClick:()=>x(v),onKeyDown:_,children:v},y))})]})}function w({image:t,text:n}){return g.jsxs(ne,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",children:[t&&g.jsx(Ue,{src:t.src,alt:t.alt,style:{maxHeight:"200px",width:"auto",margin:"20px"}}),n]})}function It(){const[t,n]=d.useState(1),{t:e}=D(),[s,o]=d.useState(!0),a=5,i=()=>{t<a&&n(t+1)},f=()=>{t>1&&n(t-1)};return g.jsx(Le,{open:s,onOpenChange:c=>o(c.open),children:g.jsxs(we,{children:[g.jsx(Ae,{children:g.jsx(Ie,{children:e("WelcomeMessage.title")})}),g.jsxs(Pe,{children:[t===1&&g.jsx(w,{image:{src:"images/WelcomeMessage1.png",alt:"Screenshot from the Search Input, where some address is written down."},text:e("WelcomeMessage.firstPage")}),t===2&&g.jsx(w,{image:{src:"images/WelcomeMessage2.png",alt:"Screenshot from a possible Simulation Result, where the solar potential of a 3D building is shown."},text:e("WelcomeMessage.secondPage")}),t===3&&g.jsx(w,{image:{src:"images/WelcomeMessage3.png",alt:"Screenshot from a possible Simulation Result, where a PV system was created and the annual result was calculated."},text:e("WelcomeMessage.thirdPage")}),t===4&&g.jsx(w,{image:{src:"images/WelcomeMessage4.png",alt:"Screenshot from a possible Simulation Result, where a PV system was created and the annual result was calculated."},text:e("WelcomeMessage.fourthPage")}),t===5&&g.jsx(w,{text:e("WelcomeMessage.fifthPage")})]}),g.jsxs(De,{children:[g.jsx(P,{variant:"subtle",mr:3,onClick:f,isDisabled:t===1,children:e("previous")}),t!=5&&g.jsx(P,{variant:"subtle",mr:3,onClick:i,isDisabled:t===a,children:e("next")})]}),g.jsx(He,{justifyContent:"center",mb:4,children:Array.from({length:a},(c,l)=>l+1).map(c=>g.jsx(Be,{size:"10px",bg:t===c?"blue.500":"gray.300",m:1},c))}),g.jsx(ke,{})]})})}function Nt(){const{t}=D(),n=[5.98,47.3,15.1,55],[e,s]=d.useState({bounds:n,zoom:6}),[o,a]=d.useState([]),i=m=>{if(m.length==0)console.error("No search results!"),tt.create({title:t("noSearchResults.title"),description:t("noSearchResults.description"),status:"error",duration:4e3,isClosable:!0});else{const h=m[0];let p=h.boundingBox;h.addressType==="building"&&a([g.jsx(te,{...h},h.key)]),console.log("bounds"),console.log(p),f.current.fitBounds(p,{maxZoom:17,speed:2})}},f=d.useRef(),c=d.useCallback(m=>{f.current=m,m!==null&&(m.getMap().dragRotate.disable(),m.getMap().touchZoomRotate.disableRotation())},[]),[l,r]=d.useState(null),u=d.useCallback(m=>{console.log(m);const{lng:h,lat:p}=m.lngLat;r([p,h])});return g.jsxs(xe,{description:t("mainDescription"),children:[g.jsx("header",{children:g.jsx("div",{className:"title",children:g.jsx(At,{callback:i})})}),g.jsx(It,{}),g.jsxs("div",{className:"content",children:[g.jsxs(Mt,{ref:c,...e,maxZoom:19,style:{width:"100%",height:"100%"},mapStyle:"https://sgx.geodatenzentrum.de/gdz_basemapde_vektor/styles/bm_web_col.json",onMove:m=>s(m.viewState),onClick:u,attributionControl:!1,maxBounds:[-10,35,30,65],children:[g.jsx(g.Fragment,{children:o}),l&&g.jsx(te,{lat:l[0],lon:l[1],display_name:t("map.userSelection")},"userSelectiion"),g.jsx(wt,{position:"bottom-right",showCompass:!1})]}),g.jsx(Oe,{federalState:"",frontendState:"Map"})]})]})}export{Nt as default};
